Enhanced error handling in Settings API