
.. DO NOT EDIT.
.. THIS FILE WAS AUTOMATICALLY GENERATED BY SPHINX-GALLERY.
.. TO MAKE CHANGES, EDIT THE SOURCE PYTHON FILE:
.. "examples/00-fluent/parametric_static_mixer_1.py"
.. LINE NUMBERS ARE GIVEN BELOW.

.. only:: html

    .. note::
        :class: sphx-glr-download-link-note

        :ref:`Go to the end <sphx_glr_download_examples_00-fluent_parametric_static_mixer_1.py>`
        to download the full example code.

.. rst-class:: sphx-glr-example-title

.. _sphx_glr_examples_00-fluent_parametric_static_mixer_1.py:

.. _ref_parametric_static_mixer_1:

Parametric study workflow
-------------------------
This example shows how you can use the parametric study workflow to analyze a
static mixer.

.. GENERATED FROM PYTHON SOURCE LINES 36-42

.. code-block:: Python


    import os

    import ansys.fluent.core as pyfluent
    from ansys.fluent.core import examples


.. GENERATED FROM PYTHON SOURCE LINES 44-47

Perform required imports
~~~~~~~~~~~~~~~~~~~~~~~~
Perform the required imports.

.. GENERATED FROM PYTHON SOURCE LINES 50-53

Launch Fluent
~~~~~~~~~~~~~
Launch Fluent in 3D and double precision and print Fluent version.

.. GENERATED FROM PYTHON SOURCE LINES 53-59

.. code-block:: Python


    solver_session = pyfluent.launch_fluent(
        precision="double", processor_count=2, mode="solver"
    )
    print(solver_session.get_fluent_version())


.. GENERATED FROM PYTHON SOURCE LINES 60-63

Download and read files
~~~~~~~~~~~~~~~~~~~~~~~
Download the files for this example and read the case for the static mixer.

.. GENERATED FROM PYTHON SOURCE LINES 63-72

.. code-block:: Python


    import_filename = examples.download_file(
        "Static_Mixer_main.cas.h5",
        "pyfluent/static_mixer",
        save_path=os.getcwd(),
    )

    solver_session.settings.file.read_case(file_name=import_filename)


.. GENERATED FROM PYTHON SOURCE LINES 73-76

Set iterations
~~~~~~~~~~~~~~
Set the number of iterations to 100.

.. GENERATED FROM PYTHON SOURCE LINES 76-79

.. code-block:: Python


    solver_session.settings.solution.run_calculation.iter_count = 100


.. GENERATED FROM PYTHON SOURCE LINES 80-87

Create input parameters
~~~~~~~~~~~~~~~~~~~~~~~
Enable parameter creation in the TUI and then create input parameters for
the velocity and temperatures of inlets 1 and 2:
Parameter values:
Inlet1: velocity (inlet1_vel) 0.5 m/s and temperature (inlet1_temp) at 300 K
Inlet2: velocity (inlet2_vel) 0.5 m/s and temperature (inlet2_temp) at 350 K

.. GENERATED FROM PYTHON SOURCE LINES 87-150

.. code-block:: Python


    solver_session.settings.parameters.enable_in_tui = True

    solver_session.settings.setup.named_expressions["inlet1_vel"] = {
        "output_parameter": False,
        "input_parameter": True,
        "unit": "velocity",
        "parametername": "inlet1_vel",
        "parameterid": "real-1",
        "description": "",
        "definition": "1 [m/s]",
        "name": "inlet1_vel",
    }

    solver_session.settings.setup.boundary_conditions.velocity_inlet["inlet1"] = {
        "momentum": {"velocity": {"value": "inlet1_vel"}}
    }

    solver_session.settings.setup.named_expressions["inlet1_temp"] = {
        "output_parameter": False,
        "input_parameter": True,
        "unit": "temperature",
        "parametername": "inlet1_temp",
        "parameterid": "real-2",
        "description": "",
        "definition": "300 [K]",
        "name": "inlet1_temp",
    }

    solver_session.settings.setup.boundary_conditions.velocity_inlet["inlet1"] = {
        "thermal": {"temperature": {"value": "inlet1_temp"}}
    }

    solver_session.settings.setup.named_expressions["inlet2_vel"] = {
        "output_parameter": False,
        "input_parameter": True,
        "unit": "velocity",
        "parametername": "inlet2_vel",
        "parameterid": "real-3",
        "description": "",
        "definition": "1 [m/s]",
        "name": "inlet2_vel",
    }

    solver_session.settings.setup.boundary_conditions.velocity_inlet["inlet2"] = {
        "momentum": {"velocity": {"value": "inlet2_vel"}}
    }

    solver_session.settings.setup.named_expressions["inlet2_temp"] = {
        "output_parameter": False,
        "input_parameter": True,
        "unit": "temperature",
        "parametername": "inlet2_temp",
        "parameterid": "real-4",
        "description": "",
        "definition": "350 [K]",
        "name": "inlet2_temp",
    }

    solver_session.settings.setup.boundary_conditions.velocity_inlet["inlet2"] = {
        "thermal": {"temperature": {"value": "inlet2_temp"}}
    }


.. GENERATED FROM PYTHON SOURCE LINES 151-155

Create output parameters
~~~~~~~~~~~~~~~~~~~~~~~~
Create output parameters named ``outlet-temp-avg`` and ``outlet-vel-avg``
using report definitions.

.. GENERATED FROM PYTHON SOURCE LINES 155-192

.. code-block:: Python


    solver_session.settings.solution.report_definitions.surface["outlet-temp-avg"] = {}
    solver_session.settings.solution.report_definitions.surface[
        "outlet-temp-avg"
    ].report_type = "surface-areaavg"
    solver_session.settings.solution.report_definitions.surface["outlet-temp-avg"].field = (
        "temperature"
    )
    solver_session.settings.solution.report_definitions.surface[
        "outlet-temp-avg"
    ].surface_names = ["outlet"]

    solver_session.settings.solution.report_definitions.surface["outlet-vel-avg"] = {}
    solver_session.settings.solution.report_definitions.surface[
        "outlet-vel-avg"
    ].report_type = "surface-areaavg"
    solver_session.settings.solution.report_definitions.surface["outlet-vel-avg"].field = (
        "velocity-magnitude"
    )
    solver_session.settings.solution.report_definitions.surface[
        "outlet-vel-avg"
    ].surface_names = ["outlet"]

    solver_session.settings.parameters.output_parameters.report_definitions[
        "parameter-5"
    ] = {}
    solver_session.settings.parameters.output_parameters.report_definitions[
        "parameter-5"
    ] = {"report_definition": "outlet-temp-avg"}

    solver_session.settings.parameters.output_parameters.report_definitions[
        "parameter-6"
    ] = {}
    solver_session.settings.parameters.output_parameters.report_definitions[
        "parameter-6"
    ] = {"report_definition": "outlet-vel-avg"}


.. GENERATED FROM PYTHON SOURCE LINES 193-196

Enable convergence condition check
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Enable the convergence condition check.

.. GENERATED FROM PYTHON SOURCE LINES 196-199

.. code-block:: Python


    solver_session.settings.solution.monitor.residual.options.criterion_type = "absolute"


.. GENERATED FROM PYTHON SOURCE LINES 200-203

Write case
~~~~~~~~~~
Write the case with all settings in place.

.. GENERATED FROM PYTHON SOURCE LINES 203-206

.. code-block:: Python


    solver_session.settings.file.write_case(file_name="Static_Mixer_Parameters.cas.h5")


.. GENERATED FROM PYTHON SOURCE LINES 207-210

Initialize parametric study
~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Initialize a parametric design point study from a Fluent session.

.. GENERATED FROM PYTHON SOURCE LINES 210-213

.. code-block:: Python


    solver_session.settings.parametric_studies.initialize(project_filename="project_1")


.. GENERATED FROM PYTHON SOURCE LINES 214-217

.. image:: /_static/DP_table_011.png
  :width: 500pt
  :align: center

.. GENERATED FROM PYTHON SOURCE LINES 219-222

Access and modify input parameters
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Access and modify the input parameters of the base design point.

.. GENERATED FROM PYTHON SOURCE LINES 222-232

.. code-block:: Python


    solver_session.settings.parametric_studies["Static_Mixer_main-Solve"].design_points[
        "Base DP"
    ].input_parameters = {
        "inlet1_temp": 300,
        "inlet2_temp": 350,
        "inlet2_vel": 1,
        "inlet1_vel": 0.5,
    }


.. GENERATED FROM PYTHON SOURCE LINES 233-236

Update current design point
~~~~~~~~~~~~~~~~~~~~~~~~~~~
Update the current design point.

.. GENERATED FROM PYTHON SOURCE LINES 236-241

.. code-block:: Python


    solver_session.settings.parametric_studies[
        "Static_Mixer_main-Solve"
    ].design_points.update_current()


.. GENERATED FROM PYTHON SOURCE LINES 242-245

Add design point
~~~~~~~~~~~~~~~~
Add a design point.

.. GENERATED FROM PYTHON SOURCE LINES 245-259

.. code-block:: Python


    solver_session.settings.parametric_studies[
        "Static_Mixer_main-Solve"
    ].design_points.create(write_data=False, capture_simulation_report_data=True)

    solver_session.settings.parametric_studies["Static_Mixer_main-Solve"].design_points[
        "DP1"
    ].input_parameters = {
        "inlet1_vel": 1,
        "inlet2_vel": 1,
        "inlet1_temp": 500,
        "inlet2_temp": 350,
    }


.. GENERATED FROM PYTHON SOURCE LINES 260-263

Duplicate design point
~~~~~~~~~~~~~~~~~~~~~~~
Duplicate design point 1 to create design point 2.

.. GENERATED FROM PYTHON SOURCE LINES 263-268

.. code-block:: Python


    solver_session.settings.parametric_studies[
        "Static_Mixer_main-Solve"
    ].design_points.duplicate(design_point="DP1")


.. GENERATED FROM PYTHON SOURCE LINES 269-272

Update all design points
~~~~~~~~~~~~~~~~~~~~~~~~
Update all design points.

.. GENERATED FROM PYTHON SOURCE LINES 272-277

.. code-block:: Python


    solver_session.settings.parametric_studies[
        "Static_Mixer_main-Solve"
    ].design_points.update_all()


.. GENERATED FROM PYTHON SOURCE LINES 278-281

.. image:: /_static/DP_table_012.png
  :width: 500pt
  :align: center

.. GENERATED FROM PYTHON SOURCE LINES 283-286

Export design point table
~~~~~~~~~~~~~~~~~~~~~~~~~
Export the design point table to a CSV file.

.. GENERATED FROM PYTHON SOURCE LINES 286-291

.. code-block:: Python


    solver_session.settings.parametric_studies.export_design_table(
        filepath="design_point_table_study_1.csv"
    )


.. GENERATED FROM PYTHON SOURCE LINES 292-295

Delete design point
~~~~~~~~~~~~~~~~~~~
Delete design point 1.

.. GENERATED FROM PYTHON SOURCE LINES 295-300

.. code-block:: Python


    solver_session.settings.parametric_studies[
        "Static_Mixer_main-Solve"
    ].design_points.delete_design_points(design_points=["DP1"])


.. GENERATED FROM PYTHON SOURCE LINES 301-304

Create parametric study
~~~~~~~~~~~~~~~~~~~~~~~
Create another parametric study by duplicating the current one.

.. GENERATED FROM PYTHON SOURCE LINES 304-307

.. code-block:: Python


    solver_session.settings.parametric_studies.duplicate(copy_design_points=True)


.. GENERATED FROM PYTHON SOURCE LINES 308-311

Rename new parametric study
~~~~~~~~~~~~~~~~~~~~~~~~~~~
Rename the newly created parametric study.

.. GENERATED FROM PYTHON SOURCE LINES 311-316

.. code-block:: Python


    solver_session.settings.parametric_studies.rename(
        new="New Study", old="Static_Mixer_main-1-Solve"
    )


.. GENERATED FROM PYTHON SOURCE LINES 317-320

Delete old parametric study
~~~~~~~~~~~~~~~~~~~~~~~~~~~
Delete the old parametric study.

.. GENERATED FROM PYTHON SOURCE LINES 320-323

.. code-block:: Python


    solver_session.settings.parametric_studies.delete(name_list="Static_Mixer_main-Solve")


.. GENERATED FROM PYTHON SOURCE LINES 324-327

Save parametric project and close Fluent
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Save the parametric project and close Fluent.

.. GENERATED FROM PYTHON SOURCE LINES 327-332

.. code-block:: Python


    solver_session.settings.file.parametric_project.save_as(
        project_filename="static_mixer_study_save.flprj"
    )


.. GENERATED FROM PYTHON SOURCE LINES 333-336

Read saved project
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Read the previously saved project.

.. GENERATED FROM PYTHON SOURCE LINES 336-342

.. code-block:: Python


    solver_session.settings.file.parametric_project.open(
        project_filename=os.path.join(os.getcwd(), "static_mixer_study_save.flprj"),
        load_case=True,
    )


.. GENERATED FROM PYTHON SOURCE LINES 343-346

Save current project
~~~~~~~~~~~~~~~~~~~~
Save the current project.

.. GENERATED FROM PYTHON SOURCE LINES 346-349

.. code-block:: Python


    solver_session.settings.file.parametric_project.save()


.. GENERATED FROM PYTHON SOURCE LINES 350-353

Save current project as a different project
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Save the current project as a different project.

.. GENERATED FROM PYTHON SOURCE LINES 353-358

.. code-block:: Python


    solver_session.settings.file.parametric_project.save_as(
        project_filename="static_mixer_study_save_as.flprj"
    )


.. GENERATED FROM PYTHON SOURCE LINES 359-362

Export current project
~~~~~~~~~~~~~~~~~~~~~~
Export the current project.

.. GENERATED FROM PYTHON SOURCE LINES 362-367

.. code-block:: Python


    solver_session.settings.file.parametric_project.save_as_copy(
        project_filename="static_mixer_study_export.flprj", convert_to_managed=False
    )


.. GENERATED FROM PYTHON SOURCE LINES 368-371

Archive current project
~~~~~~~~~~~~~~~~~~~~~~~
Archive the current project.

.. GENERATED FROM PYTHON SOURCE LINES 371-376

.. code-block:: Python


    solver_session.settings.file.parametric_project.archive(
        archive_name="static_mixer_study_archive.flprj"
    )


.. GENERATED FROM PYTHON SOURCE LINES 377-380

Close Fluent
~~~~~~~~~~~~
Close Fluent.

.. GENERATED FROM PYTHON SOURCE LINES 380-382

.. code-block:: Python


    solver_session.exit()


.. _sphx_glr_download_examples_00-fluent_parametric_static_mixer_1.py:

.. only:: html

  .. container:: sphx-glr-footer sphx-glr-footer-example

    .. container:: sphx-glr-download sphx-glr-download-jupyter

      :download:`Download Jupyter notebook: parametric_static_mixer_1.ipynb <parametric_static_mixer_1.ipynb>`

    .. container:: sphx-glr-download sphx-glr-download-python

      :download:`Download Python source code: parametric_static_mixer_1.py <parametric_static_mixer_1.py>`

    .. container:: sphx-glr-download sphx-glr-download-zip

      :download:`Download zipped: parametric_static_mixer_1.zip <parametric_static_mixer_1.zip>`


.. only:: html

 .. rst-class:: sphx-glr-signature

    `Gallery generated by Sphinx-Gallery <https://sphinx-gallery.github.io>`_
