
<!DOCTYPE html>


<html lang="en" data-content_root="../../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Modeling Solidification &#8212; PyFluent</title>
  
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../../_static/styles/theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../../_static/styles/bootstrap.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../../_static/styles/pydata-sphinx-theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />

  
  <link href="../../_static/vendor/fontawesome/6.5.2/css/all.min.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.5.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.5.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.5.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=03e43079" />
    <link rel="stylesheet" type="text/css" href="../../_static/styles/ansys-sphinx-theme.css?v=9e79609d" />
    <link rel="stylesheet" type="text/css" href="../../_static/jupyter-sphinx.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/thebelab.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../../_static/sg_gallery.css?v=d2d258e8" />
    <link rel="stylesheet" type="text/css" href="../../_static/sg_gallery-binder.css?v=f4aeca0c" />
    <link rel="stylesheet" type="text/css" href="../../_static/sg_gallery-dataframe.css?v=2082cf3c" />
    <link rel="stylesheet" type="text/css" href="../../_static/sg_gallery-rendered-html.css?v=1277b6f3" />
    <link rel="stylesheet" type="text/css" href="../../_static/styles/ansys-sphinx-theme.css?v=9e79609d" />
    <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.10.23/css/jquery.dataTables.min.css" />
    <link rel="stylesheet" type="text/css" href="https://www.nerdfonts.com/assets/css/webfont.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx-design.min.css?v=95c83b7e" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b" />
<link rel="preload" as="script" href="../../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b" />
  <script src="../../_static/vendor/fontawesome/6.5.2/js/all.min.js?digest=dfe6caa3a7d634c4db9b"></script>


  <!-- Include desired assets -->
  <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
  

  
    <link href="../../_static/css/breadcrumbs.css" rel="stylesheet" />
  
    <script src="../../_static/documentation_options.js?v=176e5614"></script>
    <script src="../../_static/doctools.js?v=9bcbadda"></script>
    <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../_static/thebelab-helper.js"></script>
    <script src="../../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../../_static/copybutton.js?v=49e1bf35"></script>
    <script src="../../_static/toggleprompt.js?v=cec9bd37"></script>
    <script src="https://cdn.datatables.net/1.10.23/js/jquery.dataTables.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@jupyter-widgets/html-manager@^1.0.1/dist/embed-amd.js"></script>
    <script src="../../_static/design-tabs.js?v=f930bc37"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'examples/00-fluent/Modeling_solidification_workflow';</script>
    <script>
        DOCUMENTATION_OPTIONS.theme_version = '0.15.4';
        DOCUMENTATION_OPTIONS.theme_switcher_json_url = 'https://fluent.docs.pyansys.com/versions.json';
        DOCUMENTATION_OPTIONS.theme_switcher_version_match = 'dev';
        DOCUMENTATION_OPTIONS.show_version_warning_banner = false;
        </script>
    <link rel="icon" href="../../_static/ansys-favicon.png"/>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Ahmed Body External Aerodynamics Simulation" href="ahmed_body_workflow.html" />
    <link rel="prev" title="Electrolysis Modeling" href="Electrolysis_Modeling_workflow.html" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  <meta property="og:site_name" content="PyAnsys" />
  <meta name="physics" content="Fluids" />
  <link rel="canonical" href="https://fluent.docs.pyansys.com/version/stable/examples/00-fluent/Modeling_solidification_workflow.html" />
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-primary-sidebar-checkbox"/>
  <label class="overlay overlay-primary" for="pst-primary-sidebar-checkbox"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-secondary-sidebar-checkbox"/>
  <label class="overlay overlay-secondary" for="pst-secondary-sidebar-checkbox"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search the docs ..."
         aria-label="Search the docs ..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
<div class="bd-header__inner bd-page-width">
  <button class="pst-navbar-icon sidebar-toggle primary-toggle" aria-label="Site navigation">
    <span class="fa-solid fa-bars"></span>
  </button>
  
  
  <div class="col-lg-3 navbar-header-items__start">
    
      <div class="navbar-item">

  
    
  

<a class="navbar-brand logo" href="../../index.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../../_static/pyansys_logo_transparent_black.png" class="logo__image only-light" alt="PyFluent - Home"/>
    <script>document.write(`<img src="../../_static/pyansys_logo_transparent_white.png" class="logo__image only-dark" alt="PyFluent - Home"/>`);</script>
  
  
</a></div>
    
  </div>
  
  <div class="col-lg-9 navbar-header-items">
    
    <div class="me-auto navbar-header-items__center">
      
        <div class="navbar-item">

<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../index.html" title="PyFluent home">Home</a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../getting_started/getting_started_contents.html">
    Getting started
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../user_guide/user_guide_contents.html">
    User guide
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../api/api_contents.html">
    API reference
  </a>
</li>


<li class="nav-item current active">
  <a class="nav-link nav-internal" href="../index.html">
    Examples
  </a>
</li>

            <li class="nav-item dropdown">
                <button class="btn dropdown-toggle nav-item" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-controls="pst-nav-more-links">
                    More
                </button>
                <ul id="pst-nav-more-links" class="dropdown-menu">
                    
<li class=" ">
  <a class="nav-link dropdown-item nav-internal" href="../../contributing/contributing_contents.html">
    Contributing to PyFluent
  </a>
</li>


<li class=" ">
  <a class="nav-link dropdown-item nav-internal" href="../../changelog.html">
    Release notes
  </a>
</li>

                </ul>
            </li>
            
  </ul>
</nav>
</div>
      
    </div>
    
    
    <div class="navbar-header-items__end">
      
      
        <div class="navbar-item">
<div class="search-bar pst-js-only" id="search-bar">
  <form class="bd-search d-flex align-items-center" action="../../search.html" method="get">
    <i class="fa-solid fa-magnifying-glass"></i>
    <input type="search" class="form-control" name="q" placeholder="Search the docs ..."
      aria-label="Search the docs ..." autocomplete="off" autocorrect="off"
      autocapitalize="off" spellcheck="false" />
    <span class="search-button__kbd-shortcut">
      <kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd>
    </span>
  </form>
  <div id="static-search-results" class="static-search-results" style="display:none;" tabindex="0"></div>
</div></div>
      
        <div class="navbar-item">
<script>
document.write(`
  <div class="version-switcher__container dropdown">
    <button id="pst-version-switcher-button-2"
      type="button"
      class="version-switcher__button btn btn-sm dropdown-toggle"
      data-bs-toggle="dropdown"
      aria-haspopup="listbox"
      aria-controls="pst-version-switcher-list-2"
      aria-label="Version switcher list"
    >
      Choose version  <!-- this text may get changed later by javascript -->
      <span class="caret"></span>
    </button>
    <div id="pst-version-switcher-list-2"
      class="version-switcher__menu dropdown-menu list-group-flush py-0"
      role="listbox" aria-labelledby="pst-version-switcher-button-2">
      <!-- dropdown will be populated by javascript on page load -->
    </div>
  </div>
`);
</script></div>
      
        <div class="navbar-item">

<script>
document.write(`
  <button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="theme-switch fa-solid fa-sun fa-lg" data-mode="light"></i>
    <i class="theme-switch fa-solid fa-moon fa-lg" data-mode="dark"></i>
    <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"></i>
  </button>
`);
</script></div>
      
        <div class="navbar-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/ansys/pyfluent" title="GitHub" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-square-github fa-lg" aria-hidden="true"></i>
            <span class="sr-only">GitHub</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/ansys/pyfluent/discussions" title="Support" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa fa-comment fa-fw fa-lg" aria-hidden="true"></i>
            <span class="sr-only">Support</span></a>
        </li>
</ul></div>
      
    </div>
    
  </div>
  
  

  
    <button class="pst-navbar-icon sidebar-toggle secondary-toggle" aria-label="On this page">
      <span class="fa-solid fa-outdent"></span>
    </button>
  
</div>

    </header>
  
  
    <div id="announcement_msg"></div>
<script>
  fetch("announcement.html")
    .then((response) => {
      if (!response.ok) {
        throw new Error(`HTTP error: ${response.status}`);
      }
      return response.text();
    })
    .then(
      (text) => (document.getElementById("announcement_msg").innerHTML = text),
    )
    .catch((error) => console.error(`Fetch problem: ${error.message}`));
</script>
  


  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
        
          
          
            <div class="navbar-item">

<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../index.html" title="PyFluent home">Home</a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../getting_started/getting_started_contents.html">
    Getting started
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../user_guide/user_guide_contents.html">
    User guide
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../api/api_contents.html">
    API reference
  </a>
</li>


<li class="nav-item current active">
  <a class="nav-link nav-internal" href="../index.html">
    Examples
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../contributing/contributing_contents.html">
    Contributing to PyFluent
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../changelog.html">
    Release notes
  </a>
</li>

  </ul>
</nav>
</div>
          
        
      </div>
    
    
    
      <div class="sidebar-header-items__end">
        
          <div class="navbar-item">
<div class="search-bar pst-js-only" id="search-bar">
  <form class="bd-search d-flex align-items-center" action="../../search.html" method="get">
    <i class="fa-solid fa-magnifying-glass"></i>
    <input type="search" class="form-control" name="q" placeholder="Search the docs ..."
      aria-label="Search the docs ..." autocomplete="off" autocorrect="off"
      autocapitalize="off" spellcheck="false" />
    <span class="search-button__kbd-shortcut">
      <kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd>
    </span>
  </form>
  <div id="static-search-results" class="static-search-results" style="display:none;" tabindex="0"></div>
</div></div>
        
          <div class="navbar-item">
<script>
document.write(`
  <div class="version-switcher__container dropdown">
    <button id="pst-version-switcher-button-3"
      type="button"
      class="version-switcher__button btn btn-sm dropdown-toggle"
      data-bs-toggle="dropdown"
      aria-haspopup="listbox"
      aria-controls="pst-version-switcher-list-3"
      aria-label="Version switcher list"
    >
      Choose version  <!-- this text may get changed later by javascript -->
      <span class="caret"></span>
    </button>
    <div id="pst-version-switcher-list-3"
      class="version-switcher__menu dropdown-menu list-group-flush py-0"
      role="listbox" aria-labelledby="pst-version-switcher-button-3">
      <!-- dropdown will be populated by javascript on page load -->
    </div>
  </div>
`);
</script></div>
        
          <div class="navbar-item">

<script>
document.write(`
  <button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="theme-switch fa-solid fa-sun fa-lg" data-mode="light"></i>
    <i class="theme-switch fa-solid fa-moon fa-lg" data-mode="dark"></i>
    <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"></i>
  </button>
`);
</script></div>
        
          <div class="navbar-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/ansys/pyfluent" title="GitHub" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-square-github fa-lg" aria-hidden="true"></i>
            <span class="sr-only">GitHub</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/ansys/pyfluent/discussions" title="Support" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa fa-comment fa-fw fa-lg" aria-hidden="true"></i>
            <span class="sr-only">Support</span></a>
        </li>
</ul></div>
        
      </div>
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
<nav class="bd-docs-nav bd-links"
     aria-label="Section Navigation">
  <p class="bd-links__title" role="heading" aria-level="1">Section Navigation</p>
  <div class="bd-toc-item navbar-nav"><ul class="current nav bd-sidenav">
<li class="toctree-l1 current active has-children"><a class="reference internal" href="index.html">Simulation Examples</a><details open="open"><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="DOE_ML.html">Design of Experiments and Machine Learning model building</a></li>
<li class="toctree-l2"><a class="reference internal" href="Electrolysis_Modeling_workflow.html">Electrolysis Modeling</a></li>
















<li class="toctree-l2 current active"><a class="current reference internal" href="#">Modeling Solidification</a></li>






















<li class="toctree-l2"><a class="reference internal" href="ahmed_body_workflow.html">Ahmed Body External Aerodynamics Simulation</a></li>
<li class="toctree-l2"><a class="reference internal" href="battery_pack.html">Simulating a 1P3S Battery Pack Using the Battery Model</a></li>





















<li class="toctree-l2"><a class="reference internal" href="brake.html">Automotive Brake Thermal Analysis</a></li>
<li class="toctree-l2"><a class="reference internal" href="catalytic_converter_workflow.html">Modeling Flow Through Porous Media - Catalytic Converter</a></li>
<li class="toctree-l2"><a class="reference internal" href="conjugate_heat_transfer.html">Conjugate Heat Transfer</a></li>
<li class="toctree-l2"><a class="reference internal" href="exhaust_system_settings_api.html">Fault-tolerant meshing workflow using settings objects</a></li>



<li class="toctree-l2"><a class="reference internal" href="external_compressible_flow.html">Modeling External Compressible Flow</a></li>



<li class="toctree-l2"><a class="reference internal" href="frozen_rotor_workflow.html">Impeller-Volute simulation using the Frozen Rotor Approach</a></li>
<li class="toctree-l2"><a class="reference internal" href="fsi_1way_workflow.html">Modeling One-Way Fluid-Structure Interaction</a></li>















<li class="toctree-l2"><a class="reference internal" href="lunar_lander_thermal.html">Thermal Model of a Lunar Lander Using the Monte Carlo Radiation Model</a></li>






<li class="toctree-l2"><a class="reference internal" href="mixing_elbow_settings_api.html">Fluent setup and solution using settings objects</a></li>
<li class="toctree-l2"><a class="reference internal" href="mixing_tank_workflow.html">Mixing Tank Workflow</a></li>
<li class="toctree-l2"><a class="reference internal" href="modeling_ablation.html">Modeling Ablation</a></li>
<li class="toctree-l2"><a class="reference internal" href="modeling_cavitation.html">Modeling Cavitation</a></li>

<li class="toctree-l2"><a class="reference internal" href="parametric_static_mixer_1.html">Parametric study workflow</a></li>
<li class="toctree-l2"><a class="reference internal" href="radiation_headlamp.html">Modeling Radiation in a Headlamp Using the Monte Carlo Method</a></li>



<li class="toctree-l2"><a class="reference internal" href="single_battery_cell_workflow.html">Single Battery Cell Using MSMD Battery Model Simulation</a></li>
<li class="toctree-l2"><a class="reference internal" href="species_transport.html">Modeling Species Transport and Gaseous Combustion</a></li>
<li class="toctree-l2"><a class="reference internal" href="steady_vortex.html">Simulation of Steady Vortex in a Stirred Tank</a></li>
<li class="toctree-l2"><a class="reference internal" href="transient_compressible_nozzle_workflow.html">Modeling Transient Compressible Flow</a></li>





















<li class="toctree-l2"><a class="reference internal" href="tyler_sofrin_modes.html">Tyler-Sofrin Compressor Modes Post-Processing</a></li>
</ul>
</details></li>
</ul>
</div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        
          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item">
<nav aria-label="Breadcrumb">
  <ul class="bd-breadcrumbs">
         
    <li class="breadcrumb-item breadcrumb-home">
      <a href="https://docs.pyansys.com/" class="nav-link">PyAnsys</a>
    </li>
     
    <li class="breadcrumb-item">
      <a
        href="../../index.html"
        class="nav-link"
        aria-label="Home"
      >
        <i class="fa-solid fa-home"></i>
      </a>
    </li>
     
    <li class="breadcrumb-item">
      <a href="../index.html" class="nav-link">Examples</a>
    </li>
     
    <li class="breadcrumb-item">
      <a href="index.html" class="nav-link">Simulation Examples</a>
    </li>
      
    <li class="breadcrumb-item active" aria-current="page"><span class="ellipsis">Modeling Solidification</span></li>
    
  </ul>
</nav>
</div>
      
    </div>
  
  
</div>
</div>
              
              
              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <div class="sphx-glr-download-link-note admonition note">
<p class="admonition-title">Note</p>
<p><a class="reference internal" href="#sphx-glr-download-examples-00-fluent-modeling-solidification-workflow-py"><span class="std std-ref">Go to the end</span></a>
to download the full example code.</p>
</div>
<section class="sphx-glr-example-title" id="modeling-solidification">
<span id="solidification-simulation"></span><span id="sphx-glr-examples-00-fluent-modeling-solidification-workflow-py"></span><h1>Modeling Solidification<a class="headerlink" href="#modeling-solidification" title="Link to this heading">#</a></h1>
</section>
<section id="objective">
<h1>Objective<a class="headerlink" href="#objective" title="Link to this heading">#</a></h1>
<p>This example models solidification in a Czochralski
crystal growth process using PyFluent. The simulation involves setting
up a two-dimensional axisymmetric swirl configuration with gravity and
activating the Solidification and Melting model to capture phase change
behavior. Pull velocities are applied to represent continuous casting,
while Marangoni convection is incorporated through a surface tension
gradient at the melt surface. The workflow begins with a steady state
conduction solution to establish a realistic initial thermal field.
Subsequently, transient flow and heat transfer are enabled to capture
the combined effects of natural and Marangoni convection. To achieve
this, custom field functions and patching techniques are employed for
efficient definition of pull velocities and initialization of the
simulation.</p>
</section>
<section id="problem-description">
<h1>Problem Description<a class="headerlink" href="#problem-description" title="Link to this heading">#</a></h1>
<p>The problem involves simulating a two-dimensional axisymmetric bowl
containing liquid metal. The liquid enters from the bottom at a
temperature of 1300 K, while solidified material is continuously
pulled from the top at a rate of 0.001 m/s. The crystal undergoes
rotation at an angular velocity of 1 rad/s, which induces a
swirling flow within the melt. Heat loss from the upper region
of the crystal promotes solidification of the liquid metal.
Additionally, Marangoni convection develops at the free surface
due to temperature-dependent variations in surface tension.
The solidification process is modeled with zero mushy zone width,
where both the solidus and liquidus temperatures are 1150 K.
The flow incorporates an axial pull velocity of 0.001 m/s and
a swirl velocity defined by ω × r, with ω = 1 rad/s.
The surface tension gradient responsible for Marangoni stress
is given by dσ/dT = –0.00036 N/m·K, and gravity acts in the
axial (X) direction with a magnitude of –9.81 m/s².</p>
<img alt="Solidification in Czochralski Model" class="align-center" src="../../_images/modeling_solidification.png" />
</section>
<section id="import-modules">
<h1>Import modules<a class="headerlink" href="#import-modules" title="Link to this heading">#</a></h1>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Importing the following classes offer streamlined access to key solver settings,
eliminating the need to manually browse through the full settings structure.</p>
</div>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">os</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">ansys.fluent.core</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pyfluent</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">ansys.fluent.core</span><span class="w"> </span><span class="kn">import</span> <span class="n">examples</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">ansys.fluent.core.solver</span><span class="w"> </span><span class="kn">import</span> <span class="p">(</span>
    <span class="n">BoundaryConditions</span><span class="p">,</span>
    <span class="n">Contour</span><span class="p">,</span>
    <span class="n">Controls</span><span class="p">,</span>
    <span class="n">General</span><span class="p">,</span>
    <span class="n">Graphics</span><span class="p">,</span>
    <span class="n">Initialization</span><span class="p">,</span>
    <span class="n">Materials</span><span class="p">,</span>
    <span class="n">Mesh</span><span class="p">,</span>
    <span class="n">Methods</span><span class="p">,</span>
    <span class="n">Results</span><span class="p">,</span>
    <span class="n">RunCalculation</span><span class="p">,</span>
    <span class="n">Setup</span><span class="p">,</span>
    <span class="n">Solution</span><span class="p">,</span>
    <span class="n">VelocityInlet</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
</section>
<section id="launch-fluent-session-in-solver-mode">
<h1>Launch Fluent session in solver mode<a class="headerlink" href="#launch-fluent-session-in-solver-mode" title="Link to this heading">#</a></h1>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">solver</span> <span class="o">=</span> <span class="n">pyfluent</span><span class="o">.</span><span class="n">launch_fluent</span><span class="p">(</span>
    <span class="n">precision</span><span class="o">=</span><span class="n">pyfluent</span><span class="o">.</span><span class="n">Precision</span><span class="o">.</span><span class="n">DOUBLE</span><span class="p">,</span>
    <span class="n">mode</span><span class="o">=</span><span class="s2">&quot;solver&quot;</span><span class="p">,</span>
    <span class="n">dimension</span><span class="o">=</span><span class="n">pyfluent</span><span class="o">.</span><span class="n">Dimension</span><span class="o">.</span><span class="n">TWO</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
</section>
<section id="download-mesh-file">
<h1>Download mesh file<a class="headerlink" href="#download-mesh-file" title="Link to this heading">#</a></h1>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">mesh_file</span> <span class="o">=</span> <span class="n">examples</span><span class="o">.</span><span class="n">download_file</span><span class="p">(</span>
    <span class="s2">&quot;solid.msh&quot;</span><span class="p">,</span>
    <span class="s2">&quot;pyfluent/solidification&quot;</span><span class="p">,</span>
    <span class="n">save_path</span><span class="o">=</span><a href="https://docs.python.org/3/library/os.html#os.getcwd" title="os.getcwd" class="sphx-glr-backref-module-os sphx-glr-backref-type-py-function"><span class="n">os</span><span class="o">.</span><span class="n">getcwd</span></a><span class="p">(),</span>
<span class="p">)</span>

<span class="n">solver</span><span class="o">.</span><span class="n">settings</span><span class="o">.</span><span class="n">file</span><span class="o">.</span><span class="n">read_mesh</span><span class="p">(</span><span class="n">file_name</span><span class="o">=</span><span class="n">mesh_file</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="display-mesh">
<h1>Display mesh<a class="headerlink" href="#display-mesh" title="Link to this heading">#</a></h1>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">graphics</span> <span class="o">=</span> <span class="n">Graphics</span><span class="p">(</span><span class="n">solver</span><span class="p">)</span>
<span class="n">mesh</span> <span class="o">=</span> <span class="n">Mesh</span><span class="p">(</span><span class="n">solver</span><span class="p">,</span> <span class="n">new_instance_name</span><span class="o">=</span><span class="s2">&quot;mesh-1&quot;</span><span class="p">)</span>
<span class="n">boundary_conditions</span> <span class="o">=</span> <span class="n">BoundaryConditions</span><span class="p">(</span><span class="n">solver</span><span class="p">)</span>

<span class="n">graphics</span><span class="o">.</span><span class="n">picture</span><span class="o">.</span><span class="n">x_resolution</span> <span class="o">=</span> <span class="mi">650</span>  <span class="c1"># Horizontal resolution for clear visualization</span>
<span class="n">graphics</span><span class="o">.</span><span class="n">picture</span><span class="o">.</span><span class="n">y_resolution</span> <span class="o">=</span> <span class="mi">450</span>  <span class="c1"># Vertical resolution matching typical aspect ratio</span>

<span class="n">all_walls</span> <span class="o">=</span> <span class="n">mesh</span><span class="o">.</span><span class="n">surfaces_list</span><span class="o">.</span><span class="n">allowed_values</span><span class="p">()</span>

<span class="n">mesh</span><span class="o">.</span><span class="n">surfaces_list</span> <span class="o">=</span> <span class="n">all_walls</span>
<span class="n">mesh</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">edges</span> <span class="o">=</span> <span class="kc">True</span>
<span class="n">mesh</span><span class="o">.</span><span class="n">display</span><span class="p">()</span>

<span class="n">graphics</span><span class="o">.</span><span class="n">picture</span><span class="o">.</span><span class="n">save_picture</span><span class="p">(</span><span class="n">file_name</span><span class="o">=</span><span class="s2">&quot;modeling_solidification_1.png&quot;</span><span class="p">)</span>
</pre></div>
</div>
<img alt="Mesh" class="align-center" src="../../_images/modeling_solidification_1.png" />
</section>
<section id="configure-solver">
<h1>Configure solver<a class="headerlink" href="#configure-solver" title="Link to this heading">#</a></h1>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">solver_general_settings</span> <span class="o">=</span> <span class="n">General</span><span class="p">(</span><span class="n">solver</span><span class="p">)</span>

<span class="n">solver_general_settings</span><span class="o">.</span><span class="n">solver</span><span class="o">.</span><span class="n">two_dim_space</span> <span class="o">=</span> <span class="s2">&quot;swirl&quot;</span>

<span class="n">solver_general_settings</span><span class="o">.</span><span class="n">operating_conditions</span><span class="o">.</span><span class="n">gravity</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;enable&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
    <span class="s2">&quot;components&quot;</span><span class="p">:</span> <span class="p">[</span><span class="o">-</span><span class="mf">9.81</span><span class="p">],</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="enable-models">
<h1>Enable models<a class="headerlink" href="#enable-models" title="Link to this heading">#</a></h1>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Energy is auto-enabled with solidification</p>
</div>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">setup</span> <span class="o">=</span> <span class="n">Setup</span><span class="p">(</span><span class="n">solver</span><span class="p">)</span>

<span class="n">setup</span><span class="o">.</span><span class="n">models</span><span class="o">.</span><span class="n">viscous</span><span class="o">.</span><span class="n">model</span> <span class="o">=</span> <span class="s2">&quot;laminar&quot;</span>

<span class="c1"># Enable the Solidification/Melting</span>
<span class="n">solver</span><span class="o">.</span><span class="n">tui</span><span class="o">.</span><span class="n">define</span><span class="o">.</span><span class="n">models</span><span class="o">.</span><span class="n">solidification_melting</span><span class="p">(</span>
    <span class="s2">&quot;yes&quot;</span><span class="p">,</span> <span class="s2">&quot;constant&quot;</span><span class="p">,</span> <span class="s2">&quot;100000&quot;</span><span class="p">,</span> <span class="s2">&quot;yes&quot;</span><span class="p">,</span> <span class="s2">&quot;no&quot;</span>  <span class="c1"># 100000 for the Mushy Zone Constant.</span>
<span class="p">)</span>
</pre></div>
</div>
</section>
<section id="define-material">
<h1>Define material<a class="headerlink" href="#define-material" title="Link to this heading">#</a></h1>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">materials</span> <span class="o">=</span> <span class="n">Materials</span><span class="p">(</span><span class="n">solver</span><span class="p">)</span>

<span class="n">materials</span><span class="o">.</span><span class="n">database</span><span class="o">.</span><span class="n">copy_by_name</span><span class="p">(</span><span class="nb">type</span><span class="o">=</span><span class="s2">&quot;fluid&quot;</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;air&quot;</span><span class="p">,</span> <span class="n">new_name</span><span class="o">=</span><span class="s2">&quot;liquid-metal&quot;</span><span class="p">)</span>

<span class="n">materials</span><span class="o">.</span><span class="n">fluid</span><span class="p">[</span><span class="s2">&quot;liquid-metal&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;density&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;polynomial&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;coefficients&quot;</span><span class="p">:</span> <span class="p">[</span>
                <span class="mi">8000</span><span class="p">,</span>
                <span class="o">-</span><span class="mf">0.1</span><span class="p">,</span>
            <span class="p">],</span>  <span class="c1"># [Density (kg/m³), Linear temp coefficient (kg/(m³·K))]</span>
            <span class="s2">&quot;function_of&quot;</span><span class="p">:</span> <span class="s2">&quot;temperature&quot;</span><span class="p">,</span>
        <span class="p">},</span>
        <span class="s2">&quot;option&quot;</span><span class="p">:</span> <span class="s2">&quot;polynomial&quot;</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="s2">&quot;viscosity&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="mf">0.00553</span><span class="p">},</span>  <span class="c1"># Pa·s</span>
    <span class="s2">&quot;specific_heat&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="mf">680.0</span><span class="p">},</span>  <span class="c1"># J/kg·K</span>
    <span class="s2">&quot;thermal_conductivity&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="mf">30.0</span><span class="p">},</span>  <span class="c1"># W/m·K</span>
    <span class="s2">&quot;melting_heat&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="mf">100000.0</span><span class="p">},</span>  <span class="c1"># J/kg</span>
    <span class="s2">&quot;tsolidus&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="mf">1150.0</span><span class="p">},</span>  <span class="c1"># K</span>
    <span class="s2">&quot;tliqidus&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="mf">1150.0</span><span class="p">},</span>  <span class="c1"># K</span>
<span class="p">}</span>

<span class="c1"># Assign material to fluid zone</span>
<span class="n">setup</span><span class="o">.</span><span class="n">cell_zone_conditions</span><span class="o">.</span><span class="n">fluid</span><span class="p">[</span><span class="s2">&quot;fluid&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;general&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;material&quot;</span><span class="p">:</span> <span class="s2">&quot;liquid-metal&quot;</span><span class="p">}}</span>
</pre></div>
</div>
</section>
<section id="boundary-conditions">
<h1>Boundary conditions<a class="headerlink" href="#boundary-conditions" title="Link to this heading">#</a></h1>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Inlet: liquid injection</span>
<span class="n">inlet</span> <span class="o">=</span> <span class="n">VelocityInlet</span><span class="p">(</span><span class="n">solver</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;inlet&quot;</span><span class="p">)</span>

<span class="n">inlet</span><span class="o">.</span><span class="n">momentum</span><span class="o">.</span><span class="n">velocity_magnitude</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="mf">0.00101</span>  <span class="c1"># m/s</span>
<span class="n">inlet</span><span class="o">.</span><span class="n">thermal</span><span class="o">.</span><span class="n">temperature</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="mi">1300</span>  <span class="c1"># K</span>

<span class="c1"># Outlet: solid pull-out (velocity inlet with axial + swirl)</span>
<span class="n">outlet</span> <span class="o">=</span> <span class="n">VelocityInlet</span><span class="p">(</span><span class="n">solver</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;outlet&quot;</span><span class="p">)</span>

<span class="n">outlet</span><span class="o">.</span><span class="n">momentum</span><span class="o">.</span><span class="n">velocity_specification_method</span> <span class="o">=</span> <span class="s2">&quot;Components&quot;</span>
<span class="n">outlet</span><span class="o">.</span><span class="n">momentum</span><span class="o">.</span><span class="n">swirl_angular_velocity</span> <span class="o">=</span> <span class="mi">1</span>  <span class="c1"># rad/s</span>
<span class="n">outlet</span><span class="o">.</span><span class="n">momentum</span><span class="o">.</span><span class="n">velocity_components</span> <span class="o">=</span> <span class="p">[</span><span class="mf">0.001</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>  <span class="c1"># Axial = 0.001 m/s</span>
<span class="n">outlet</span><span class="o">.</span><span class="n">thermal</span><span class="o">.</span><span class="n">temperature</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="mi">500</span>  <span class="c1"># K</span>


<span class="n">conditions</span> <span class="o">=</span> <span class="n">BoundaryConditions</span><span class="p">(</span><span class="n">solver</span><span class="p">)</span>

<span class="c1"># Bottom wall: fixed temperature</span>
<span class="n">conditions</span><span class="o">.</span><span class="n">wall</span><span class="p">[</span><span class="s2">&quot;bottom-wall&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;thermal&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;thermal_condition&quot;</span><span class="p">:</span> <span class="s2">&quot;Temperature&quot;</span><span class="p">,</span> <span class="s2">&quot;temperature&quot;</span><span class="p">:</span> <span class="mi">1300</span><span class="p">}</span>  <span class="c1"># K</span>
<span class="p">}</span>

<span class="c1"># Free surface: Marangoni stress + convection</span>
<span class="n">conditions</span><span class="o">.</span><span class="n">wall</span><span class="p">[</span><span class="s2">&quot;free-surface&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;momentum&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;shear_condition&quot;</span><span class="p">:</span> <span class="s2">&quot;Marangoni Stress&quot;</span><span class="p">,</span>
        <span class="s2">&quot;surface_tension_gradient&quot;</span><span class="p">:</span> <span class="o">-</span><span class="mf">0.00036</span><span class="p">,</span>  <span class="c1"># N/m·K</span>
    <span class="p">},</span>
    <span class="s2">&quot;thermal&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;thermal_condition&quot;</span><span class="p">:</span> <span class="s2">&quot;Convection&quot;</span><span class="p">,</span>
        <span class="s2">&quot;free_stream_temp&quot;</span><span class="p">:</span> <span class="mi">1500</span><span class="p">,</span>  <span class="c1"># K</span>
        <span class="s2">&quot;heat_transfer_coeff&quot;</span><span class="p">:</span> <span class="mi">100</span><span class="p">,</span>  <span class="c1"># W/m²·K</span>
    <span class="p">},</span>
<span class="p">}</span>

<span class="c1"># Side wall: fixed temperature</span>
<span class="n">conditions</span><span class="o">.</span><span class="n">wall</span><span class="p">[</span><span class="s2">&quot;side-wall&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;thermal&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;thermal_condition&quot;</span><span class="p">:</span> <span class="s2">&quot;Temperature&quot;</span><span class="p">,</span> <span class="s2">&quot;temperature&quot;</span><span class="p">:</span> <span class="mi">1400</span><span class="p">}</span>  <span class="c1"># K</span>
<span class="p">}</span>

<span class="c1"># Solid wall: rotating + cold</span>
<span class="n">conditions</span><span class="o">.</span><span class="n">wall</span><span class="p">[</span><span class="s2">&quot;solid-wall&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;momentum&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;wall_motion&quot;</span><span class="p">:</span> <span class="s2">&quot;Moving Wall&quot;</span><span class="p">,</span>
        <span class="s2">&quot;velocity_spec&quot;</span><span class="p">:</span> <span class="s2">&quot;Rotational&quot;</span><span class="p">,</span>
        <span class="s2">&quot;rotation_speed&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>  <span class="c1"># rad/s</span>
    <span class="p">},</span>
    <span class="s2">&quot;thermal&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;thermal_condition&quot;</span><span class="p">:</span> <span class="s2">&quot;Temperature&quot;</span><span class="p">,</span> <span class="s2">&quot;temperature&quot;</span><span class="p">:</span> <span class="mi">500</span><span class="p">},</span>  <span class="c1"># K</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="solution-methods">
<h1>Solution methods<a class="headerlink" href="#solution-methods" title="Link to this heading">#</a></h1>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">methods</span> <span class="o">=</span> <span class="n">Methods</span><span class="p">(</span><span class="n">solver</span><span class="p">)</span>

<span class="n">methods</span><span class="o">.</span><span class="n">p_v_coupling</span><span class="o">.</span><span class="n">flow_scheme</span> <span class="o">=</span> <span class="s2">&quot;Coupled&quot;</span>
<span class="n">methods</span><span class="o">.</span><span class="n">spatial_discretization</span><span class="o">.</span><span class="n">discretization_scheme</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;pressure&quot;</span><span class="p">:</span> <span class="s2">&quot;presto!&quot;</span><span class="p">}</span>
<span class="n">methods</span><span class="o">.</span><span class="n">pseudo_time_method</span><span class="o">.</span><span class="n">formulation</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;coupled_solver&quot;</span><span class="p">:</span> <span class="s2">&quot;global-time-step&quot;</span><span class="p">}</span>
</pre></div>
</div>
</section>
<section id="disable-flow-equations">
<h1>Disable flow equations<a class="headerlink" href="#disable-flow-equations" title="Link to this heading">#</a></h1>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">controls</span> <span class="o">=</span> <span class="n">Controls</span><span class="p">(</span><span class="n">solver</span><span class="p">)</span>

<span class="n">controls</span><span class="o">.</span><span class="n">equations</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;flow&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span> <span class="s2">&quot;w-swirl&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">}</span>
</pre></div>
</div>
</section>
<section id="initialize-flow-field">
<h1>Initialize flow field<a class="headerlink" href="#initialize-flow-field" title="Link to this heading">#</a></h1>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">initialize</span> <span class="o">=</span> <span class="n">Initialization</span><span class="p">(</span><span class="n">solver</span><span class="p">)</span>
<span class="n">initialize</span><span class="o">.</span><span class="n">hybrid_initialize</span><span class="p">()</span>
</pre></div>
</div>
</section>
<section id="define-custom-field-function">
<h1>Define custom field function<a class="headerlink" href="#define-custom-field-function" title="Link to this heading">#</a></h1>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">results</span> <span class="o">=</span> <span class="n">Results</span><span class="p">(</span><span class="n">solver</span><span class="p">)</span>

<span class="n">results</span><span class="o">.</span><span class="n">custom_field_functions</span><span class="o">.</span><span class="n">create</span><span class="p">(</span>
    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;omegar&quot;</span><span class="p">,</span> <span class="n">custom_field_function</span><span class="o">=</span><span class="s2">&quot;1 * radial_coordinate&quot;</span>  <span class="c1"># ω = 1 rad/s</span>
<span class="p">)</span>
</pre></div>
</div>
</section>
<section id="patch-pull-velocities">
<h1>Patch pull velocities<a class="headerlink" href="#patch-pull-velocities" title="Link to this heading">#</a></h1>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Axial pull velocity = 0.001 m/s</span>
<span class="n">initialize</span><span class="o">.</span><span class="n">patch</span><span class="o">.</span><span class="n">calculate_patch</span><span class="p">(</span>
    <span class="n">cell_zones</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;fluid&quot;</span><span class="p">],</span>
    <span class="n">variable</span><span class="o">=</span><span class="s2">&quot;x-pull-velocity&quot;</span><span class="p">,</span>
    <span class="n">reference_frame</span><span class="o">=</span><span class="s2">&quot;Relative to Cell Zone&quot;</span><span class="p">,</span>
    <span class="n">use_custom_field_function</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">custom_field_function_name</span><span class="o">=</span><span class="s2">&quot;omegar&quot;</span><span class="p">,</span>
    <span class="n">value</span><span class="o">=</span><span class="mf">0.001</span><span class="p">,</span>
<span class="p">)</span>

<span class="c1"># Swirl pull velocity = ω × r</span>
<span class="n">initialize</span><span class="o">.</span><span class="n">patch</span><span class="o">.</span><span class="n">calculate_patch</span><span class="p">(</span>
    <span class="n">cell_zones</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;fluid&quot;</span><span class="p">],</span>
    <span class="n">variable</span><span class="o">=</span><span class="s2">&quot;z-pull-velocity&quot;</span><span class="p">,</span>
    <span class="n">reference_frame</span><span class="o">=</span><span class="s2">&quot;Relative to Cell Zone&quot;</span><span class="p">,</span>
    <span class="n">use_custom_field_function</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">custom_field_function_name</span><span class="o">=</span><span class="s2">&quot;omegar&quot;</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
</section>
<section id="pseudo-transient-settings">
<h1>Pseudo-transient settings<a class="headerlink" href="#pseudo-transient-settings" title="Link to this heading">#</a></h1>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">solver</span><span class="o">.</span><span class="n">settings</span><span class="o">.</span><span class="n">solution</span><span class="o">.</span><span class="n">run_calculation</span><span class="o">.</span><span class="n">pseudo_time_settings</span><span class="o">.</span><span class="n">time_step_method</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;time_step_method&quot;</span><span class="p">:</span> <span class="s2">&quot;user-specified&quot;</span><span class="p">,</span>
    <span class="s2">&quot;auto_time_size_calc_solid_zone&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
<span class="p">}</span>


<span class="n">calculation</span> <span class="o">=</span> <span class="n">RunCalculation</span><span class="p">(</span><span class="n">solver</span><span class="p">)</span>
<span class="n">calculation</span><span class="o">.</span><span class="n">iterate</span><span class="p">(</span><span class="n">iter_count</span><span class="o">=</span><span class="mi">20</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="post-processing">
<h1>Post-processing<a class="headerlink" href="#post-processing" title="Link to this heading">#</a></h1>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">temp_contour</span> <span class="o">=</span> <span class="n">Contour</span><span class="p">(</span><span class="n">solver</span><span class="p">,</span> <span class="n">new_instance_name</span><span class="o">=</span><span class="s2">&quot;temperature_contour&quot;</span><span class="p">)</span>

<span class="n">temp_contour</span><span class="o">.</span><span class="n">coloring</span><span class="o">.</span><span class="n">option</span> <span class="o">=</span> <span class="s2">&quot;banded&quot;</span>
<span class="n">temp_contour</span><span class="o">.</span><span class="n">field</span> <span class="o">=</span> <span class="s2">&quot;temperature&quot;</span>
<span class="n">temp_contour</span><span class="o">.</span><span class="n">display</span><span class="p">()</span>

<span class="n">graphics</span><span class="o">.</span><span class="n">views</span><span class="o">.</span><span class="n">restore_view</span><span class="p">(</span><span class="n">view_name</span><span class="o">=</span><span class="s2">&quot;front&quot;</span><span class="p">)</span>
<span class="n">graphics</span><span class="o">.</span><span class="n">picture</span><span class="o">.</span><span class="n">save_picture</span><span class="p">(</span><span class="n">file_name</span><span class="o">=</span><span class="s2">&quot;modeling_solidification_2.png&quot;</span><span class="p">)</span>
</pre></div>
</div>
<img alt="Temperature Contours" class="align-center" src="../../_images/modeling_solidification_2.png" />
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">mushy_temp</span> <span class="o">=</span> <span class="n">Contour</span><span class="p">(</span><span class="n">solver</span><span class="p">,</span> <span class="n">new_instance_name</span><span class="o">=</span><span class="s2">&quot;temperature-mushy&quot;</span><span class="p">)</span>
<span class="n">mushy_temp</span><span class="o">.</span><span class="n">coloring</span><span class="o">.</span><span class="n">option</span> <span class="o">=</span> <span class="s2">&quot;banded&quot;</span>
<span class="n">mushy_temp</span><span class="o">.</span><span class="n">field</span> <span class="o">=</span> <span class="s2">&quot;temperature&quot;</span>
<span class="n">mushy_temp</span><span class="o">.</span><span class="n">range_option</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;option&quot;</span><span class="p">:</span> <span class="s2">&quot;auto-range-off&quot;</span><span class="p">,</span>
    <span class="s2">&quot;auto_range_off&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;clip_to_range&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span> <span class="s2">&quot;minimum&quot;</span><span class="p">:</span> <span class="mi">1100</span><span class="p">,</span> <span class="s2">&quot;maximum&quot;</span><span class="p">:</span> <span class="mi">1200</span><span class="p">},</span>
<span class="p">}</span>
<span class="n">mushy_temp</span><span class="o">.</span><span class="n">display</span><span class="p">()</span>

<span class="n">graphics</span><span class="o">.</span><span class="n">views</span><span class="o">.</span><span class="n">restore_view</span><span class="p">(</span><span class="n">view_name</span><span class="o">=</span><span class="s2">&quot;front&quot;</span><span class="p">)</span>
<span class="n">graphics</span><span class="o">.</span><span class="n">picture</span><span class="o">.</span><span class="n">save_picture</span><span class="p">(</span><span class="n">file_name</span><span class="o">=</span><span class="s2">&quot;modeling_solidification_3.png&quot;</span><span class="p">)</span>
</pre></div>
</div>
<img alt="Mushy Zone" class="align-center" src="../../_images/modeling_solidification_3.png" />
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Save steady state case</span>
<span class="n">solver</span><span class="o">.</span><span class="n">settings</span><span class="o">.</span><span class="n">file</span><span class="o">.</span><span class="n">write_case_data</span><span class="p">(</span><span class="n">file_name</span><span class="o">=</span><span class="s2">&quot;steady_state&quot;</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="enable-transient-flow-and-heat-transfer">
<h1>Enable transient flow and heat transfer<a class="headerlink" href="#enable-transient-flow-and-heat-transfer" title="Link to this heading">#</a></h1>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">solver_general_settings</span><span class="o">.</span><span class="n">solver</span><span class="o">.</span><span class="n">time</span> <span class="o">=</span> <span class="s2">&quot;unsteady-1st-order&quot;</span>  <span class="c1"># First-order implicit</span>

<span class="n">controls</span><span class="o">.</span><span class="n">equations</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;flow&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span> <span class="s2">&quot;w-swirl&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">}</span>

<span class="n">controls</span><span class="o">.</span><span class="n">under_relaxation</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;delh&quot;</span><span class="p">:</span> <span class="mf">0.1</span><span class="p">}</span>
</pre></div>
</div>
</section>
<section id="transient-controls">
<h1>Transient controls<a class="headerlink" href="#transient-controls" title="Link to this heading">#</a></h1>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">solutions</span> <span class="o">=</span> <span class="n">Solution</span><span class="p">(</span><span class="n">solver</span><span class="p">)</span>

<span class="n">solutions</span><span class="o">.</span><span class="n">run_calculation</span><span class="o">.</span><span class="n">transient_controls</span><span class="o">.</span><span class="n">time_step_count</span> <span class="o">=</span> <span class="mi">2</span>
<span class="n">solutions</span><span class="o">.</span><span class="n">run_calculation</span><span class="o">.</span><span class="n">transient_controls</span><span class="o">.</span><span class="n">time_step_size</span> <span class="o">=</span> <span class="mf">0.1</span>  <span class="c1"># s</span>
<span class="n">solutions</span><span class="o">.</span><span class="n">run_calculation</span><span class="o">.</span><span class="n">calculate</span><span class="p">()</span>

<span class="c1"># Liquid fraction at t = 0.2 s</span>
<span class="n">liquid_fraction_contour</span> <span class="o">=</span> <span class="n">Contour</span><span class="p">(</span><span class="n">solver</span><span class="p">,</span> <span class="n">new_instance_name</span><span class="o">=</span><span class="s2">&quot;liquid-fraction&quot;</span><span class="p">)</span>

<span class="n">liquid_fraction_contour</span><span class="o">.</span><span class="n">field</span> <span class="o">=</span> <span class="s2">&quot;liquid-fraction&quot;</span>
<span class="n">liquid_fraction_contour</span><span class="o">.</span><span class="n">display</span><span class="p">()</span>

<span class="n">graphics</span><span class="o">.</span><span class="n">picture</span><span class="o">.</span><span class="n">save_picture</span><span class="p">(</span><span class="n">file_name</span><span class="o">=</span><span class="s2">&quot;modeling_solidification_4.png&quot;</span><span class="p">)</span>
</pre></div>
</div>
<img alt="Liquid Fraction at t = 0.2 s" class="align-center" src="../../_images/modeling_solidification_4.png" />
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Continue to t = 5.0 s (48 more steps)</span>
<span class="n">solutions</span><span class="o">.</span><span class="n">run_calculation</span><span class="o">.</span><span class="n">transient_controls</span><span class="o">.</span><span class="n">time_step_count</span> <span class="o">=</span> <span class="mi">48</span>

<span class="n">solutions</span><span class="o">.</span><span class="n">run_calculation</span><span class="o">.</span><span class="n">calculate</span><span class="p">()</span>

<span class="c1"># Liquid fraction at t = 5.0 s</span>
<span class="n">liquid_fraction_contour_t_5_sec</span> <span class="o">=</span> <span class="n">Contour</span><span class="p">(</span><span class="n">solver</span><span class="p">,</span> <span class="n">new_instance_name</span><span class="o">=</span><span class="s2">&quot;liquid-fraction&quot;</span><span class="p">)</span>

<span class="n">liquid_fraction_contour_t_5_sec</span><span class="o">.</span><span class="n">field</span> <span class="o">=</span> <span class="s2">&quot;liquid-fraction&quot;</span>
<span class="n">liquid_fraction_contour_t_5_sec</span><span class="o">.</span><span class="n">display</span><span class="p">()</span>

<span class="n">graphics</span><span class="o">.</span><span class="n">picture</span><span class="o">.</span><span class="n">save_picture</span><span class="p">(</span><span class="n">file_name</span><span class="o">=</span><span class="s2">&quot;modeling_solidification_5.png&quot;</span><span class="p">)</span>
</pre></div>
</div>
<img alt="Liquid Fraction at t = 5 s" class="align-center" src="../../_images/modeling_solidification_5.png" />
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Save transient case</span>
<span class="n">solver</span><span class="o">.</span><span class="n">settings</span><span class="o">.</span><span class="n">file</span><span class="o">.</span><span class="n">write_case_data</span><span class="p">(</span><span class="n">file_name</span><span class="o">=</span><span class="s2">&quot;unsteady_state&quot;</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="close-session">
<h1>Close session<a class="headerlink" href="#close-session" title="Link to this heading">#</a></h1>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">solver</span><span class="o">.</span><span class="n">exit</span><span class="p">()</span>
</pre></div>
</div>
</section>
<section id="summary">
<h1>Summary<a class="headerlink" href="#summary" title="Link to this heading">#</a></h1>
<p>In this example, we used PyFluent to model solidification
in a Czochralski crystal growth process. The workflow begins
with a steady conduction solution to establish the initial
thermal field, followed by transient flow to capture natural
and Marangoni-driven convection. Pull velocities are applied
through a custom field function (ω × r), and surface tension
gradients define Marangoni effects. This approach is efficient,
fully scriptable, and easily adaptable to other casting or
crystal growth simulations.</p>
</section>
<section id="references">
<h1>References:<a class="headerlink" href="#references" title="Link to this heading">#</a></h1>
<p>[1] Modeling Solidification, <a class="reference external" href="https://ansyshelp.ansys.com/public/account/secured?returnurl=/Views/Secured/corp/v252/en/flu_tg/x1-37700023.html">Ansys Fluent documentation​</a>.</p>
<div class="sphx-glr-footer sphx-glr-footer-example docutils container" id="sphx-glr-download-examples-00-fluent-modeling-solidification-workflow-py">
<div class="sphx-glr-download sphx-glr-download-jupyter docutils container">
<p><a class="reference download internal" download="" href="../../_downloads/01e52be5e29d40aff6b89786a7577a05/Modeling_solidification_workflow.ipynb"><code class="xref download docutils literal notranslate"><span class="pre">Download</span> <span class="pre">Jupyter</span> <span class="pre">notebook:</span> <span class="pre">Modeling_solidification_workflow.ipynb</span></code></a></p>
</div>
<div class="sphx-glr-download sphx-glr-download-python docutils container">
<p><a class="reference download internal" download="" href="../../_downloads/0f65b26698c584d4a028f3a604bd74fb/Modeling_solidification_workflow.py"><code class="xref download docutils literal notranslate"><span class="pre">Download</span> <span class="pre">Python</span> <span class="pre">source</span> <span class="pre">code:</span> <span class="pre">Modeling_solidification_workflow.py</span></code></a></p>
</div>
<div class="sphx-glr-download sphx-glr-download-zip docutils container">
<p><a class="reference download internal" download="" href="../../_downloads/6b182cb54e1e229793f19b7a93aaadd1/Modeling_solidification_workflow.zip"><code class="xref download docutils literal notranslate"><span class="pre">Download</span> <span class="pre">zipped:</span> <span class="pre">Modeling_solidification_workflow.zip</span></code></a></p>
</div>
</div>
<p class="sphx-glr-signature"><a class="reference external" href="https://sphinx-gallery.github.io">Gallery generated by Sphinx-Gallery</a></p>
</section>


                </article>
              
              
              
              
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
<div
    id="pst-page-navigation-heading-2"
    class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> On this page
  </div>
  <nav class="bd-toc-nav page-toc" aria-labelledby="pst-page-navigation-heading-2">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#">Modeling Solidification</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#objective">Objective</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#problem-description">Problem Description</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#import-modules">Import modules</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#launch-fluent-session-in-solver-mode">Launch Fluent session in solver mode</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#download-mesh-file">Download mesh file</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#display-mesh">Display mesh</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#configure-solver">Configure solver</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#enable-models">Enable models</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#define-material">Define material</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#boundary-conditions">Boundary conditions</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#solution-methods">Solution methods</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#disable-flow-equations">Disable flow equations</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#initialize-flow-field">Initialize flow field</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#define-custom-field-function">Define custom field function</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#patch-pull-velocities">Patch pull velocities</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#pseudo-transient-settings">Pseudo-transient settings</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#post-processing">Post-processing</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#enable-transient-flow-and-heat-transfer">Enable transient flow and heat transfer</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#transient-controls">Transient controls</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#close-session">Close session</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#summary">Summary</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#references">References:</a></li>
</ul>

  </nav></div>

  <div class="sidebar-secondary-item">
<!-- If there is no fix edit button function, use the PyData edit-this-button-->
</div>

  <div class="sidebar-secondary-item">
  <div role="note" aria-label="source link">
    <ul class="this-page-menu">
      <li><a href="../../_sources/examples/00-fluent/Modeling_solidification_workflow.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
          </footer>
        
      </main>
    </div>
  </div>
  
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b"></script>
<script src="../../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b"></script>


  <!-- Include desired assets -->
  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.7/require.min.js"></script>

<script>
// Passing the search options to the search.js file
const SEARCH_OPTIONS = JSON.parse('{"keys": ["title", "text", "objectID"], "limit": 10, "threshold": 0.2}');
const SEARCH_FILE = "../../_static/search.json";
const ADVANCE_SEARCH_PATH = "../../search.html";
const EXTRA_SOURCES = JSON.parse('""');
</script>


<script src="../../_static/js/search.js"></script>

  
  <footer class="bd-footer">
<div class="bd-footer__inner bd-page-width">
  
    <div class="footer-items__start">
      
        <div class="footer-item">

  <p class="copyright">
    
      © Copyright (c) 2026 ANSYS, Inc. All rights reserved.
      <br/>
    
  </p>
</div>
      
        <div class="footer-item">

  <p class="sphinx-version">
    Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 8.1.3.
    <br/>
  </p>
</div>
      
    </div>
  
  
  
    <div class="footer-items__end">
      
        <div class="footer-item"><p class="theme-version">
  Built with the
  <a href="https://sphinxdocs.ansys.com/version/stable/index.html"
    >Ansys Sphinx Theme</a
  >
  1.6.3. <br />Last updated on
  <span id="ast_build_date"></span>
</p>
<script>
  var options = { day: "numeric", month: "long", year: "numeric" };
  var ast_lastModifiedDate = new Date(document.lastModified);
  var ast_build_date = ast_lastModifiedDate.toLocaleDateString("en-US", options);
  document.getElementById("ast_build_date").innerHTML = ast_build_date;
</script></div>
      
    </div>
  
</div>

  </footer>
  </body>
</html>