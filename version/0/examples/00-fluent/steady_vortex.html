
<!DOCTYPE html>


<html lang="en" data-content_root="../../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Simulation of Steady Vortex in a Stirred Tank &#8212; PyFluent</title>
  
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  <!--
    this give us a css class that will be invisible only if js is disabled
  -->
  <noscript>
    <style>
      .pst-js-only { display: none !important; }

    </style>
  </noscript>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../../_static/styles/theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />
<link href="../../_static/styles/pydata-sphinx-theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />

    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=03e43079" />
    <link rel="stylesheet" type="text/css" href="../../_static/styles/ansys-sphinx-theme.css?v=9e79609d" />
    <link rel="stylesheet" type="text/css" href="../../_static/jupyter-sphinx.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/thebelab.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../../_static/sg_gallery.css?v=d2d258e8" />
    <link rel="stylesheet" type="text/css" href="../../_static/sg_gallery-binder.css?v=f4aeca0c" />
    <link rel="stylesheet" type="text/css" href="../../_static/sg_gallery-dataframe.css?v=2082cf3c" />
    <link rel="stylesheet" type="text/css" href="../../_static/sg_gallery-rendered-html.css?v=1277b6f3" />
    <link rel="stylesheet" type="text/css" href="../../_static/styles/ansys-sphinx-theme.css?v=9e79609d" />
    <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.10.23/css/jquery.dataTables.min.css" />
    <link rel="stylesheet" type="text/css" href="https://www.nerdfonts.com/assets/css/webfont.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx-design.min.css?v=95c83b7e" />
  
  <!-- So that users can add custom icons -->
  <script src="../../_static/scripts/fontawesome.js?digest=8878045cc6db502f8baf"></script>
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf" />
<link rel="preload" as="script" href="../../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf" />


  <!-- Include desired assets -->
  <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
  

  
    <link href="../../_static/css/breadcrumbs.css" rel="stylesheet" />
  
    <script src="../../_static/documentation_options.js?v=78e06d40"></script>
    <script src="../../_static/doctools.js?v=9bcbadda"></script>
    <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../_static/thebelab-helper.js"></script>
    <script src="../../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../../_static/copybutton.js?v=49e1bf35"></script>
    <script src="../../_static/toggleprompt.js?v=cec9bd37"></script>
    <script src="https://cdn.datatables.net/1.10.23/js/jquery.dataTables.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@jupyter-widgets/html-manager@^1.0.1/dist/embed-amd.js"></script>
    <script src="../../_static/design-tabs.js?v=f930bc37"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'examples/00-fluent/steady_vortex';</script>
    <script>
        DOCUMENTATION_OPTIONS.theme_version = '0.16.1';
        DOCUMENTATION_OPTIONS.theme_switcher_json_url = 'https://fluent.docs.pyansys.com/versions.json';
        DOCUMENTATION_OPTIONS.theme_switcher_version_match = '0.37';
        DOCUMENTATION_OPTIONS.show_version_warning_banner =
            false;
        </script>
    <link rel="icon" href="../../_static/ansys-favicon.png"/>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Modeling Transient Compressible Flow" href="transient_compressible_nozzle_workflow.html" />
    <link rel="prev" title="Modeling Species Transport and Gaseous Combustion" href="species_transport.html" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  <meta name="docsearch:version" content="0.37.0" />
  <meta property="og:site_name" content="PyAnsys" />
  <meta name="physics" content="Fluids" />
  <link rel="canonical" href="https://fluent.docs.pyansys.com/version/stable/examples/00-fluent/steady_vortex.html" />
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <dialog id="pst-search-dialog">
    
<form class="bd-search d-flex align-items-center"
      action="../../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         placeholder="Search the docs ..."
         aria-label="Search the docs ..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
  </dialog>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
<div class="bd-header__inner bd-page-width">
  <button class="pst-navbar-icon sidebar-toggle primary-toggle" aria-label="Site navigation">
    <span class="fa-solid fa-bars"></span>
  </button>
  
  
  <div class="col-lg-3 navbar-header-items__start">
    
      <div class="navbar-item">

  
    
  

<a class="navbar-brand logo" href="../../index.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../../_static/pyansys_logo_transparent_black.png" class="logo__image only-light" alt="PyFluent - Home"/>
    <img src="../../_static/pyansys_logo_transparent_white.png" class="logo__image only-dark pst-js-only" alt="PyFluent - Home"/>
  
  
</a></div>
    
  </div>
  
  <div class="col-lg-9 navbar-header-items">
    
    <div class="me-auto navbar-header-items__center">
      
        <div class="navbar-item">

<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../index.html" title="PyFluent home">Home</a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../getting_started/getting_started_contents.html">
    Getting started
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../user_guide/user_guide_contents.html">
    User guide
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../api/api_contents.html">
    API reference
  </a>
</li>


<li class="nav-item current active">
  <a class="nav-link nav-internal" href="../index.html">
    Examples
  </a>
</li>

            <li class="nav-item dropdown">
                <button class="btn dropdown-toggle nav-item" type="button"
                data-bs-toggle="dropdown" aria-expanded="false"
                aria-controls="pst-nav-more-links">
                    More
                </button>
                <ul id="pst-nav-more-links" class="dropdown-menu">
                    
<li class=" ">
  <a class="nav-link dropdown-item nav-internal" href="../../contributing/contributing_contents.html">
    Contributing to PyFluent
  </a>
</li>


<li class=" ">
  <a class="nav-link dropdown-item nav-internal" href="../../changelog.html">
    Release notes
  </a>
</li>

                </ul>
            </li>
            
  </ul>
</nav>
</div>
      
    </div>
    
    
    <div class="navbar-header-items__end">
      
      
        <div class="navbar-item">
<div class="search-bar pst-js-only" id="search-bar">
  <form class="bd-search d-flex align-items-center" action="../../search.html" method="get">
    <i class="fa-solid fa-magnifying-glass"></i>
    <input type="search" class="form-control" name="q" placeholder="Search the docs ..."
      aria-label="Search the docs ..." autocomplete="off" autocorrect="off"
      autocapitalize="off" spellcheck="false" />
    <span class="search-button__kbd-shortcut">
      <kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd>
    </span>
  </form>
  <div id="static-search-results" class="static-search-results" style="display:none;" tabindex="0"></div>
</div></div>
      
        <div class="navbar-item">
<div class="version-switcher__container dropdown pst-js-only">
  <button id="pst-version-switcher-button-2"
    type="button"
    class="version-switcher__button btn btn-sm dropdown-toggle"
    data-bs-toggle="dropdown"
    aria-haspopup="listbox"
    aria-controls="pst-version-switcher-list-2"
    aria-label="Version switcher list"
  >
    Choose version  <!-- this text may get changed later by javascript -->
    <span class="caret"></span>
  </button>
  <div id="pst-version-switcher-list-2"
    class="version-switcher__menu dropdown-menu list-group-flush py-0"
    role="listbox" aria-labelledby="pst-version-switcher-button-2">
    <!-- dropdown will be populated by javascript on page load -->
  </div>
</div></div>
      
        <div class="navbar-item">

<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button></div>
      
        <div class="navbar-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/ansys/pyfluent" title="GitHub" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-square-github fa-lg" aria-hidden="true"></i>
            <span class="sr-only">GitHub</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/ansys/pyfluent/discussions" title="Support" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa fa-comment fa-fw fa-lg" aria-hidden="true"></i>
            <span class="sr-only">Support</span></a>
        </li>
</ul></div>
      
    </div>
    
  </div>
  
  

  
    <button class="pst-navbar-icon sidebar-toggle secondary-toggle" aria-label="On this page">
      <span class="fa-solid fa-outdent"></span>
    </button>
  
</div>

    </header>
  
  
    <div id="announcement_msg"></div>
<script>
  fetch("announcement.html")
    .then((response) => {
      if (!response.ok) {
        throw new Error(`HTTP error: ${response.status}`);
      }
      return response.text();
    })
    .then(
      (text) => (document.getElementById("announcement_msg").innerHTML = text),
    )
    .catch((error) => console.error(`Fetch problem: ${error.message}`));
</script>
  


  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <dialog id="pst-primary-sidebar-modal"></dialog>
      <div id="pst-primary-sidebar" class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
        
          
          
            <div class="navbar-item">

<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../index.html" title="PyFluent home">Home</a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../getting_started/getting_started_contents.html">
    Getting started
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../user_guide/user_guide_contents.html">
    User guide
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../api/api_contents.html">
    API reference
  </a>
</li>


<li class="nav-item current active">
  <a class="nav-link nav-internal" href="../index.html">
    Examples
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../contributing/contributing_contents.html">
    Contributing to PyFluent
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../changelog.html">
    Release notes
  </a>
</li>

  </ul>
</nav>
</div>
          
        
      </div>
    
    
    
      <div class="sidebar-header-items__end">
        
          <div class="navbar-item">
<div class="search-bar pst-js-only" id="search-bar">
  <form class="bd-search d-flex align-items-center" action="../../search.html" method="get">
    <i class="fa-solid fa-magnifying-glass"></i>
    <input type="search" class="form-control" name="q" placeholder="Search the docs ..."
      aria-label="Search the docs ..." autocomplete="off" autocorrect="off"
      autocapitalize="off" spellcheck="false" />
    <span class="search-button__kbd-shortcut">
      <kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd>
    </span>
  </form>
  <div id="static-search-results" class="static-search-results" style="display:none;" tabindex="0"></div>
</div></div>
        
          <div class="navbar-item">
<div class="version-switcher__container dropdown pst-js-only">
  <button id="pst-version-switcher-button-3"
    type="button"
    class="version-switcher__button btn btn-sm dropdown-toggle"
    data-bs-toggle="dropdown"
    aria-haspopup="listbox"
    aria-controls="pst-version-switcher-list-3"
    aria-label="Version switcher list"
  >
    Choose version  <!-- this text may get changed later by javascript -->
    <span class="caret"></span>
  </button>
  <div id="pst-version-switcher-list-3"
    class="version-switcher__menu dropdown-menu list-group-flush py-0"
    role="listbox" aria-labelledby="pst-version-switcher-button-3">
    <!-- dropdown will be populated by javascript on page load -->
  </div>
</div></div>
        
          <div class="navbar-item">

<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button></div>
        
          <div class="navbar-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/ansys/pyfluent" title="GitHub" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-square-github fa-lg" aria-hidden="true"></i>
            <span class="sr-only">GitHub</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/ansys/pyfluent/discussions" title="Support" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa fa-comment fa-fw fa-lg" aria-hidden="true"></i>
            <span class="sr-only">Support</span></a>
        </li>
</ul></div>
        
      </div>
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
<nav class="bd-docs-nav bd-links"
     aria-label="Section Navigation">
  <p class="bd-links__title" role="heading" aria-level="1">Section Navigation</p>
  <div class="bd-toc-item navbar-nav"><ul class="current nav bd-sidenav">
<li class="toctree-l1 current active has-children"><a class="reference internal" href="index.html">Simulation Examples</a><details open="open"><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="DOE_ML.html">Design of Experiments and Machine Learning model building</a></li>
<li class="toctree-l2"><a class="reference internal" href="Electrolysis_Modeling_workflow.html">Electrolysis Modeling</a></li>
















<li class="toctree-l2"><a class="reference internal" href="Modeling_solidification_workflow.html">Modeling Solidification</a></li>






















<li class="toctree-l2"><a class="reference internal" href="ahmed_body_workflow.html">Ahmed Body External Aerodynamics Simulation</a></li>
<li class="toctree-l2"><a class="reference internal" href="battery_pack.html">Simulating a 1P3S Battery Pack Using the Battery Model</a></li>





















<li class="toctree-l2"><a class="reference internal" href="brake.html">Automotive Brake Thermal Analysis</a></li>
<li class="toctree-l2"><a class="reference internal" href="catalytic_converter_workflow.html">Modeling Flow Through Porous Media - Catalytic Converter</a></li>
<li class="toctree-l2"><a class="reference internal" href="conjugate_heat_transfer.html">Conjugate Heat Transfer</a></li>
<li class="toctree-l2"><a class="reference internal" href="exhaust_system_settings_api.html">Fault-tolerant meshing workflow using settings objects</a></li>



<li class="toctree-l2"><a class="reference internal" href="external_compressible_flow.html">Modeling External Compressible Flow</a></li>



<li class="toctree-l2"><a class="reference internal" href="frozen_rotor_workflow.html">Impeller-Volute simulation using the Frozen Rotor Approach</a></li>
<li class="toctree-l2"><a class="reference internal" href="fsi_1way_workflow.html">Modeling One-Way Fluid-Structure Interaction</a></li>















<li class="toctree-l2"><a class="reference internal" href="lunar_lander_thermal.html">Thermal Model of a Lunar Lander Using the Monte Carlo Radiation Model</a></li>






<li class="toctree-l2"><a class="reference internal" href="mixing_elbow_settings_api.html">Fluent setup and solution using settings objects</a></li>
<li class="toctree-l2"><a class="reference internal" href="mixing_tank_workflow.html">Mixing Tank Workflow</a></li>
<li class="toctree-l2"><a class="reference internal" href="modeling_ablation.html">Modeling Ablation</a></li>
<li class="toctree-l2"><a class="reference internal" href="modeling_cavitation.html">Modeling Cavitation</a></li>

<li class="toctree-l2"><a class="reference internal" href="parametric_static_mixer_1.html">Parametric study workflow</a></li>
<li class="toctree-l2"><a class="reference internal" href="radiation_headlamp.html">Modeling Radiation in a Headlamp Using the Monte Carlo Method</a></li>



<li class="toctree-l2"><a class="reference internal" href="single_battery_cell_workflow.html">Single Battery Cell Using MSMD Battery Model Simulation</a></li>
<li class="toctree-l2"><a class="reference internal" href="species_transport.html">Modeling Species Transport and Gaseous Combustion</a></li>
<li class="toctree-l2 current active"><a class="current reference internal" href="#">Simulation of Steady Vortex in a Stirred Tank</a></li>
<li class="toctree-l2"><a class="reference internal" href="transient_compressible_nozzle_workflow.html">Modeling Transient Compressible Flow</a></li>





















<li class="toctree-l2"><a class="reference internal" href="tyler_sofrin_modes.html">Tyler-Sofrin Compressor Modes Post-Processing</a></li>
</ul>
</details></li>
</ul>
</div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
      <div class="sidebar-primary-item">
<div id="ethical-ad-placement"
      class="flat"
      data-ea-publisher="readthedocs"
      data-ea-type="readthedocs-sidebar"
      data-ea-manual="true">
</div></div>
  </div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        
          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item">
<nav aria-label="Breadcrumb">
  <ul class="bd-breadcrumbs">
         
    <li class="breadcrumb-item breadcrumb-home">
      <a href="https://docs.pyansys.com/" class="nav-link">PyAnsys</a>
    </li>
     
    <li class="breadcrumb-item">
      <a
        href="../../index.html"
        class="nav-link"
        aria-label="Home"
      >
        <i class="fa-solid fa-home"></i>
      </a>
    </li>
     
    <li class="breadcrumb-item">
      <a href="../index.html" class="nav-link">Examples</a>
    </li>
     
    <li class="breadcrumb-item">
      <a href="index.html" class="nav-link">Simulation Examples</a>
    </li>
      
    <li class="breadcrumb-item active" aria-current="page"><span class="ellipsis">Simulation of Steady Vortex in a Stirred Tank</span></li>
    
  </ul>
</nav>
</div>
      
    </div>
  
  
</div>
</div>
              
              
              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <div class="sphx-glr-download-link-note admonition note">
<p class="admonition-title">Note</p>
<p><a class="reference internal" href="#sphx-glr-download-examples-00-fluent-steady-vortex-py"><span class="std std-ref">Go to the end</span></a>
to download the full example code.</p>
</div>
<section class="sphx-glr-example-title" id="simulation-of-steady-vortex-in-a-stirred-tank">
<span id="steady-vortex"></span><span id="sphx-glr-examples-00-fluent-steady-vortex-py"></span><h1>Simulation of Steady Vortex in a Stirred Tank<a class="headerlink" href="#simulation-of-steady-vortex-in-a-stirred-tank" title="Link to this heading">#</a></h1>
<section id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Link to this heading">#</a></h2>
<p>This tutorial demonstrates simulating vortex dynamics within continuous stirred tank
reactors (CSTRs), which are extensively utilized in industries such as chemical,
petrochemical, and pharmaceuticals for applications like fluid blending, crystallization,
and pharmaceutical manufacturing. This tutorial includes step-by-step instructions on
setting up the simulation using the MRF method, and employing best
practices to accelerate free-surface flow simulations. Understanding vortex formation is
crucial, as it often leads to undesirable effects like air entrainment and improper solid
mixing. Identifying operating conditions that lead to vortex formation can help minimize
these issues and ensure optimal liquid blending.</p>
<figure class="align-center">
<a class="reference internal image-reference" href="../../_images/steady_vortex_setup.png"><img alt="../../_images/steady_vortex_setup.png" src="../../_images/steady_vortex_setup.png" style="width: 500pt;" />
</a>
</figure>
</section>
<section id="problem-description">
<h2>Problem Description<a class="headerlink" href="#problem-description" title="Link to this heading">#</a></h2>
<p>In this tutorial, we aim to model vortex formation in a stirred tank using a steady-state
simulation. The setup involves an unbaffled cylindrical tank equipped with a Rushton
turbine impeller, featuring the following specifications:</p>
<p>Tank Diameter : 0.29 meters
Impeller Diameter: 0.1 meters
Liquid Level: 0.19 meters
Agitation Speed: 240 [rev min^-1]</p>
<p>The aim is to examine the vortex dynamics within the tank under given conditions.</p>
<figure class="align-center">
<a class="reference internal image-reference" href="../../_images/steady_vortex_dimensions.png"><img alt="../../_images/steady_vortex_dimensions.png" src="../../_images/steady_vortex_dimensions.png" style="width: 500pt;" />
</a>
</figure>
</section>
<section id="simulation-setup-solution">
<h2>Simulation Setup &amp; Solution<a class="headerlink" href="#simulation-setup-solution" title="Link to this heading">#</a></h2>
<section id="import-required-modules-and-classes">
<h3>Import required modules and classes<a class="headerlink" href="#import-required-modules-and-classes" title="Link to this heading">#</a></h3>
<p>Import some direct settings classes which will be used in the following sections.
These classes allow straightforward access to various settings without the need to
navigate through the settings hierarchy.</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">os</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">imageio.v2</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">imageio</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">ansys.fluent.core</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pyfluent</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">ansys.fluent.core</span><span class="w"> </span><span class="kn">import</span> <span class="n">Dimension</span><span class="p">,</span> <span class="n">FluentMode</span><span class="p">,</span> <span class="n">Precision</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">ansys.fluent.core.examples</span><span class="w"> </span><span class="kn">import</span> <span class="n">download_file</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">ansys.fluent.core.solver</span><span class="w"> </span><span class="kn">import</span> <span class="p">(</span>  <span class="c1"># noqa: E402</span>
    <span class="n">LIC</span><span class="p">,</span>
    <span class="n">CellRegister</span><span class="p">,</span>
    <span class="n">CellZoneCondition</span><span class="p">,</span>
    <span class="n">Contour</span><span class="p">,</span>
    <span class="n">General</span><span class="p">,</span>
    <span class="n">Graphics</span><span class="p">,</span>
    <span class="n">Initialization</span><span class="p">,</span>
    <span class="n">IsoClip</span><span class="p">,</span>
    <span class="n">IsoSurface</span><span class="p">,</span>
    <span class="n">Materials</span><span class="p">,</span>
    <span class="n">Mesh</span><span class="p">,</span>
    <span class="n">Methods</span><span class="p">,</span>
    <span class="n">Models</span><span class="p">,</span>
    <span class="n">NamedExpression</span><span class="p">,</span>
    <span class="n">PlaneSurface</span><span class="p">,</span>
    <span class="n">RunCalculation</span><span class="p">,</span>
    <span class="n">Scene</span><span class="p">,</span>
    <span class="n">WallBoundary</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
</section>
<section id="launch-fluent">
<h3>Launch Fluent<a class="headerlink" href="#launch-fluent" title="Link to this heading">#</a></h3>
<p>Launch Fluent in 3D double precision solver mode.</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">solver_session</span> <span class="o">=</span> <span class="n">pyfluent</span><span class="o">.</span><span class="n">launch_fluent</span><span class="p">(</span>
    <span class="n">mode</span><span class="o">=</span><span class="n">FluentMode</span><span class="o">.</span><span class="n">SOLVER</span><span class="p">,</span>
    <span class="n">dimension</span><span class="o">=</span><span class="n">Dimension</span><span class="o">.</span><span class="n">THREE</span><span class="p">,</span>
    <span class="n">precision</span><span class="o">=</span><span class="n">Precision</span><span class="o">.</span><span class="n">DOUBLE</span><span class="p">,</span>
    <span class="n">cleanup_on_exit</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">cwd</span><span class="o">=</span><a href="https://docs.python.org/3/library/os.html#os.getcwd" title="os.getcwd" class="sphx-glr-backref-module-os sphx-glr-backref-type-py-function"><span class="n">os</span><span class="o">.</span><span class="n">getcwd</span></a><span class="p">(),</span>
<span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">solver_session</span><span class="o">.</span><span class="n">get_fluent_version</span><span class="p">())</span>  <span class="c1"># Print the Fluent version</span>
<span class="n">pyfluent</span><span class="o">.</span><span class="n">set_console_logging_level</span><span class="p">(</span><span class="s2">&quot;INFO&quot;</span><span class="p">)</span>  <span class="c1"># Set the console logging level</span>
</pre></div>
</div>
</section>
<section id="mesh">
<h3>Mesh<a class="headerlink" href="#mesh" title="Link to this heading">#</a></h3>
<p>Download the mesh file and read it into the Fluent session.</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">vortex_mesh</span> <span class="o">=</span> <span class="n">download_file</span><span class="p">(</span>
    <span class="s2">&quot;vortex-mixingtank.msh.h5&quot;</span><span class="p">,</span>
    <span class="s2">&quot;pyfluent/examples/Steady-Vortex-VOF&quot;</span><span class="p">,</span>
    <span class="n">save_path</span><span class="o">=</span><a href="https://docs.python.org/3/library/os.html#os.getcwd" title="os.getcwd" class="sphx-glr-backref-module-os sphx-glr-backref-type-py-function"><span class="n">os</span><span class="o">.</span><span class="n">getcwd</span></a><span class="p">(),</span>
<span class="p">)</span>
</pre></div>
</div>
</section>
<section id="define-constants">
<h3>Define Constants<a class="headerlink" href="#define-constants" title="Link to this heading">#</a></h3>
<p>Define constants.</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">g</span> <span class="o">=</span> <span class="mf">9.81</span>  <span class="c1"># m/s^2</span>
</pre></div>
</div>
</section>
<section id="read-mesh">
<h3>Read Mesh<a class="headerlink" href="#read-mesh" title="Link to this heading">#</a></h3>
<p>Import the mesh file into the Fluent session.</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">solver_session</span><span class="o">.</span><span class="n">settings</span><span class="o">.</span><span class="n">file</span><span class="o">.</span><span class="n">read_case</span><span class="p">(</span><span class="n">file_name</span><span class="o">=</span><span class="n">vortex_mesh</span><span class="p">)</span>
</pre></div>
</div>
<p>Display the mesh in Fluent and save the image to a file to examine locally.</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Create a middle plane to display the mesh</span>
<span class="n">y_mid_plane</span> <span class="o">=</span> <span class="n">PlaneSurface</span><span class="p">(</span><span class="n">solver_session</span><span class="p">,</span> <span class="n">new_instance_name</span><span class="o">=</span><span class="s2">&quot;y_mid_plane&quot;</span><span class="p">)</span>
<span class="n">y_mid_plane</span><span class="o">.</span><span class="n">method</span> <span class="o">=</span> <span class="s2">&quot;zx-plane&quot;</span>
<span class="n">y_mid_plane</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">y_mid_plane</span><span class="o">.</span><span class="n">display</span><span class="p">()</span>

<span class="c1"># Define and display the mesh</span>
<span class="n">mesh</span> <span class="o">=</span> <span class="n">Mesh</span><span class="p">(</span><span class="n">solver_session</span><span class="p">,</span> <span class="n">new_instance_name</span><span class="o">=</span><span class="s2">&quot;mesh&quot;</span><span class="p">)</span>
<span class="n">mesh</span><span class="o">.</span><span class="n">surfaces_list</span> <span class="o">=</span> <span class="n">y_mid_plane</span><span class="o">.</span><span class="n">name</span><span class="p">()</span>
<span class="n">mesh</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">edges</span> <span class="o">=</span> <span class="kc">True</span>
<span class="n">mesh</span><span class="o">.</span><span class="n">display</span><span class="p">()</span>

<span class="c1"># Create Graphics object to save the mesh image</span>
<span class="n">graphics</span> <span class="o">=</span> <span class="n">Graphics</span><span class="p">(</span><span class="n">solver_session</span><span class="p">)</span>
<span class="n">graphics</span><span class="o">.</span><span class="n">views</span><span class="o">.</span><span class="n">auto_scale</span><span class="p">()</span>
<span class="k">if</span> <span class="n">graphics</span><span class="o">.</span><span class="n">picture</span><span class="o">.</span><span class="n">use_window_resolution</span><span class="o">.</span><span class="n">is_active</span><span class="p">():</span>
    <span class="n">graphics</span><span class="o">.</span><span class="n">picture</span><span class="o">.</span><span class="n">use_window_resolution</span> <span class="o">=</span> <span class="kc">False</span>

<span class="n">graphics</span><span class="o">.</span><span class="n">views</span><span class="o">.</span><span class="n">restore_view</span><span class="p">(</span><span class="n">view_name</span><span class="o">=</span><span class="s2">&quot;top&quot;</span><span class="p">)</span>
<span class="n">graphics</span><span class="o">.</span><span class="n">views</span><span class="o">.</span><span class="n">auto_scale</span><span class="p">()</span>
<span class="n">graphics</span><span class="o">.</span><span class="n">picture</span><span class="o">.</span><span class="n">x_resolution</span> <span class="o">=</span> <span class="mi">600</span>
<span class="n">graphics</span><span class="o">.</span><span class="n">picture</span><span class="o">.</span><span class="n">y_resolution</span> <span class="o">=</span> <span class="mi">600</span>
<span class="n">graphics</span><span class="o">.</span><span class="n">picture</span><span class="o">.</span><span class="n">color_mode</span> <span class="o">=</span> <span class="s2">&quot;mono&quot;</span>
<span class="n">graphics</span><span class="o">.</span><span class="n">picture</span><span class="o">.</span><span class="n">save_picture</span><span class="p">(</span><span class="n">file_name</span><span class="o">=</span><span class="s2">&quot;mesh.png&quot;</span><span class="p">)</span>
</pre></div>
</div>
<figure class="align-center" id="id3">
<a class="reference internal image-reference" href="../../_images/mesh1.png"><img alt="../../_images/mesh1.png" src="../../_images/mesh1.png" style="width: 500pt;" />
</a>
<figcaption>
<p><span class="caption-text">Polyhexcore Mesh for the Steady Vortex Simulation</span><a class="headerlink" href="#id3" title="Link to this image">#</a></p>
</figcaption>
</figure>
</section>
<section id="define-general-settings">
<h3>Define General Settings<a class="headerlink" href="#define-general-settings" title="Link to this heading">#</a></h3>
<p>Set gravity</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">general_settings</span> <span class="o">=</span> <span class="n">General</span><span class="p">(</span><span class="n">solver_session</span><span class="p">)</span>
<span class="n">general_settings</span><span class="o">.</span><span class="n">operating_conditions</span><span class="o">.</span><span class="n">gravity</span><span class="o">.</span><span class="n">enable</span> <span class="o">=</span> <span class="kc">True</span>
<span class="n">general_settings</span><span class="o">.</span><span class="n">operating_conditions</span><span class="o">.</span><span class="n">gravity</span><span class="o">.</span><span class="n">components</span> <span class="o">=</span> <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="o">-</span><span class="n">g</span><span class="p">]</span>
</pre></div>
</div>
</section>
<section id="copy-materials-from-fluent-database">
<h3>Copy Materials from Fluent Database<a class="headerlink" href="#copy-materials-from-fluent-database" title="Link to this heading">#</a></h3>
<p>Copy water liquid materials from the Fluent database.</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">materials</span> <span class="o">=</span> <span class="n">Materials</span><span class="p">(</span><span class="n">solver_session</span><span class="p">)</span>
<span class="n">materials</span><span class="o">.</span><span class="n">database</span><span class="o">.</span><span class="n">copy_by_name</span><span class="p">(</span><span class="nb">type</span><span class="o">=</span><span class="s2">&quot;fluid&quot;</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;water-liquid&quot;</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="define-named-expression-for-agitation-speed">
<h3>Define Named Expression for Agitation Speed<a class="headerlink" href="#define-named-expression-for-agitation-speed" title="Link to this heading">#</a></h3>
<p>Create a named expression for the agitation speed and specify as an input parameter.</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">stirring_speed</span> <span class="o">=</span> <span class="n">NamedExpression</span><span class="p">(</span><span class="n">solver_session</span><span class="p">,</span> <span class="n">new_instance_name</span><span class="o">=</span><span class="s2">&quot;stirring_speed&quot;</span><span class="p">)</span>

<span class="n">stirring_speed</span><span class="o">.</span><span class="n">definition</span> <span class="o">=</span> <span class="s2">&quot;240 [rev min^-1]&quot;</span>
<span class="n">stirring_speed</span><span class="o">.</span><span class="n">input_parameter</span> <span class="o">=</span> <span class="kc">True</span>
</pre></div>
</div>
</section>
<section id="mrf-zone-parameters">
<h3>MRF zone parameters<a class="headerlink" href="#mrf-zone-parameters" title="Link to this heading">#</a></h3>
<p>Define MRF zone parameters for the mrf cell zone.</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">fluid_cell_zone</span> <span class="o">=</span> <span class="n">CellZoneCondition</span><span class="p">(</span><span class="n">solver_session</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;mrf&quot;</span><span class="p">)</span>
<span class="n">fluid_cell_zone</span><span class="o">.</span><span class="n">reference_frame</span><span class="o">.</span><span class="n">frame_motion</span> <span class="o">=</span> <span class="kc">True</span>
<span class="n">fluid_cell_zone</span><span class="o">.</span><span class="n">reference_frame</span><span class="o">.</span><span class="n">reference_frame_axis_origin</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>
<span class="n">fluid_cell_zone</span><span class="o">.</span><span class="n">reference_frame</span><span class="o">.</span><span class="n">reference_frame_axis_direction</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span>
<span class="n">fluid_cell_zone</span><span class="o">.</span><span class="n">reference_frame</span><span class="o">.</span><span class="n">mrf_omega</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="s2">&quot;stirring_speed&quot;</span>
</pre></div>
</div>
</section>
<section id="rotating-wall-bc-parameters">
<h3>Rotating Wall BC parameters<a class="headerlink" href="#rotating-wall-bc-parameters" title="Link to this heading">#</a></h3>
<p>Define the rotating wall boundary condition for the shaft.</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">wall_boundary</span> <span class="o">=</span> <span class="n">WallBoundary</span><span class="p">(</span><span class="n">solver_session</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;shaft_tank&quot;</span><span class="p">)</span>
<span class="n">wall_boundary</span><span class="o">.</span><span class="n">momentum</span><span class="o">.</span><span class="n">wall_motion</span> <span class="o">=</span> <span class="s2">&quot;Moving Wall&quot;</span>
<span class="n">wall_boundary</span><span class="o">.</span><span class="n">momentum</span><span class="o">.</span><span class="n">relative</span> <span class="o">=</span> <span class="kc">False</span>
<span class="n">wall_boundary</span><span class="o">.</span><span class="n">momentum</span><span class="o">.</span><span class="n">rotating</span> <span class="o">=</span> <span class="kc">True</span>
<span class="n">wall_boundary</span><span class="o">.</span><span class="n">momentum</span><span class="o">.</span><span class="n">rotation_axis_direction</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span>
<span class="n">wall_boundary</span><span class="o">.</span><span class="n">momentum</span><span class="o">.</span><span class="n">rotation_speed</span> <span class="o">=</span> <span class="s2">&quot;stirring_speed&quot;</span>
</pre></div>
</div>
</section>
<section id="physical-models-vof">
<h3>Physical Models: VOF<a class="headerlink" href="#physical-models-vof" title="Link to this heading">#</a></h3>
<p>Enable the VOF multiphase model and update the curvature correction setting for the viscous model.</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">model_setup</span> <span class="o">=</span> <span class="n">Models</span><span class="p">(</span><span class="n">solver_session</span><span class="p">)</span>
<span class="n">model_setup</span><span class="o">.</span><span class="n">multiphase</span><span class="o">.</span><span class="n">model</span> <span class="o">=</span> <span class="s2">&quot;vof&quot;</span>
<span class="n">model_setup</span><span class="o">.</span><span class="n">multiphase</span><span class="o">.</span><span class="n">vof_parameters</span><span class="o">.</span><span class="n">vof_formulation</span> <span class="o">=</span> <span class="s2">&quot;implicit&quot;</span>
<span class="n">model_setup</span><span class="o">.</span><span class="n">multiphase</span><span class="o">.</span><span class="n">vof_parameters</span><span class="o">.</span><span class="n">vof_cutoff</span> <span class="o">=</span> <span class="mf">1e-06</span>
<span class="n">model_setup</span><span class="o">.</span><span class="n">multiphase</span><span class="o">.</span><span class="n">advanced_formulation</span><span class="o">.</span><span class="n">implicit_body_force</span> <span class="o">=</span> <span class="kc">True</span>

<span class="n">model_setup</span><span class="o">.</span><span class="n">viscous</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">curvature_correction</span> <span class="o">=</span> <span class="kc">True</span>

<span class="n">solution_methods</span> <span class="o">=</span> <span class="n">Methods</span><span class="p">(</span><span class="n">solver_session</span><span class="p">)</span>
<span class="n">solution_methods</span><span class="o">.</span><span class="n">multiphase_numerics</span><span class="o">.</span><span class="n">solution_stabilization</span><span class="o">.</span><span class="n">execute_settings_optimization</span> <span class="o">=</span> <span class="p">(</span>
    <span class="kc">True</span>
<span class="p">)</span>
<span class="n">solution_methods</span><span class="o">.</span><span class="n">multiphase_numerics</span><span class="o">.</span><span class="n">solution_stabilization</span><span class="o">.</span><span class="n">execute_advanced_stabilization</span> <span class="o">=</span> <span class="p">(</span>
    <span class="kc">True</span>
<span class="p">)</span>

<span class="c1"># Change phase names</span>
<span class="n">solver_session</span><span class="o">.</span><span class="n">tui</span><span class="o">.</span><span class="n">define</span><span class="o">.</span><span class="n">phases</span><span class="o">.</span><span class="n">set_domain_properties</span><span class="o">.</span><span class="n">change_phases_names</span><span class="p">(</span>
    <span class="s2">&quot;water&quot;</span><span class="p">,</span> <span class="s2">&quot;air&quot;</span>
<span class="p">)</span>
<span class="n">general_settings</span><span class="o">.</span><span class="n">solver</span><span class="o">.</span><span class="n">time</span> <span class="o">=</span> <span class="s2">&quot;steady&quot;</span>  <span class="c1"># steady solver</span>
</pre></div>
</div>
</section>
<section id="define-initial-conditions">
<h3>Define Initial Conditions<a class="headerlink" href="#define-initial-conditions" title="Link to this heading">#</a></h3>
<p>Define initial conditions for the simulation and set up cell registers to define the initial
liquid region in the tank and initialize the solution and set multipase numerics settings.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Create a region of cells to patch the water volume fraction. Mark the cells from the bottom of
the tank up to the specified height. Create a cell register named “liquid_patch”. Set Z-min to
the tank’s minimum height coordinate and Z-max to 0.19 m. Utilize the minimum and maximum X &amp; Y
values to ensure cells across the entire tank diameter are included.</p>
</div>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">solution_initialization</span> <span class="o">=</span> <span class="n">Initialization</span><span class="p">(</span><span class="n">solver_session</span><span class="p">)</span>
<span class="n">solution_initialization</span><span class="o">.</span><span class="n">reference_frame</span> <span class="o">=</span> <span class="s2">&quot;absolute&quot;</span>
<span class="n">solution_initialization</span><span class="o">.</span><span class="n">defaults</span><span class="p">[</span><span class="s2">&quot;k&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mf">0.001</span>
<span class="n">solution_initialization</span><span class="o">.</span><span class="n">localized_turb_init</span><span class="o">.</span><span class="n">enabled</span> <span class="o">=</span> <span class="kc">False</span>

<span class="n">solver_session</span><span class="o">.</span><span class="n">settings</span><span class="o">.</span><span class="n">solution</span><span class="o">.</span><span class="n">cell_registers</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;liquid_patch&quot;</span><span class="p">)</span>
<span class="n">cell_register</span> <span class="o">=</span> <span class="n">CellRegister</span><span class="p">(</span><span class="n">solver_session</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;liquid_patch&quot;</span><span class="p">)</span>
<span class="n">cell_register</span><span class="o">.</span><span class="n">type</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;option&quot;</span><span class="p">:</span> <span class="s2">&quot;hexahedron&quot;</span><span class="p">,</span>
    <span class="s2">&quot;hexahedron&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;inside&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
        <span class="s2">&quot;max_point&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mf">100.0</span><span class="p">,</span> <span class="mf">100.0</span><span class="p">,</span> <span class="mf">0.19</span><span class="p">],</span>
        <span class="s2">&quot;min_point&quot;</span><span class="p">:</span> <span class="p">[</span><span class="o">-</span><span class="mf">100.0</span><span class="p">,</span> <span class="o">-</span><span class="mf">100.0</span><span class="p">,</span> <span class="o">-</span><span class="mf">100.0</span><span class="p">],</span>
    <span class="p">},</span>
<span class="p">}</span>

<span class="n">solution_initialization</span><span class="o">.</span><span class="n">initialize</span><span class="p">()</span>

<span class="c1"># Patch the water volume fraction in the defined cell register to set the initial</span>
<span class="c1"># liquid region in the tank.</span>
<span class="c1"># &quot;mp&quot; refers to the volume fraction of the primary phase (here water).</span>
<span class="c1"># Setting value=1 fills the patch region entirely with water.</span>
<span class="n">solution_initialization</span><span class="o">.</span><span class="n">patch</span><span class="o">.</span><span class="n">calculate_patch</span><span class="p">(</span>
    <span class="n">domain</span><span class="o">=</span><span class="s2">&quot;water&quot;</span><span class="p">,</span>
    <span class="n">cell_zones</span><span class="o">=</span><span class="p">[],</span>
    <span class="n">registers</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;liquid_patch&quot;</span><span class="p">],</span>
    <span class="n">variable</span><span class="o">=</span><span class="s2">&quot;mp&quot;</span><span class="p">,</span>
    <span class="n">reference_frame</span><span class="o">=</span><span class="s2">&quot;Relative to Cell Zone&quot;</span><span class="p">,</span>
    <span class="n">use_custom_field_function</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="n">value</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
</section>
<section id="postprocessing-setup">
<h3>Postprocessing Setup<a class="headerlink" href="#postprocessing-setup" title="Link to this heading">#</a></h3>
<p>Define surfaces, meshes and scenes for postprocessing and visualization.
e.g., to visualize the free surface and wetted walls and dry walls.</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Free surface iso-surface</span>
<span class="n">solver_session</span><span class="o">.</span><span class="n">settings</span><span class="o">.</span><span class="n">results</span><span class="o">.</span><span class="n">surfaces</span><span class="o">.</span><span class="n">iso_surface</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;freesurface&quot;</span><span class="p">)</span>
<span class="n">freesurface</span> <span class="o">=</span> <span class="n">IsoSurface</span><span class="p">(</span><span class="n">solver_session</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;freesurface&quot;</span><span class="p">)</span>
<span class="n">freesurface</span><span class="o">.</span><span class="n">field</span> <span class="o">=</span> <span class="s2">&quot;water-vof&quot;</span>
<span class="n">freesurface</span><span class="o">.</span><span class="n">iso_values</span> <span class="o">=</span> <span class="p">[</span><span class="mf">0.5</span><span class="p">]</span>

<span class="c1"># Wetted wall and dry wall iso-clips</span>
<span class="n">solver_session</span><span class="o">.</span><span class="n">settings</span><span class="o">.</span><span class="n">results</span><span class="o">.</span><span class="n">surfaces</span><span class="o">.</span><span class="n">iso_clip</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;wet_wall&quot;</span><span class="p">)</span>
<span class="n">wet_wall</span> <span class="o">=</span> <span class="n">IsoClip</span><span class="p">(</span><span class="n">solver_session</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;wet_wall&quot;</span><span class="p">)</span>
<span class="n">wet_wall</span><span class="o">.</span><span class="n">field</span> <span class="o">=</span> <span class="s2">&quot;water-vof&quot;</span>
<span class="n">wet_wall</span><span class="o">.</span><span class="n">range</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;minimum&quot;</span><span class="p">:</span> <span class="mf">0.5</span><span class="p">,</span>
    <span class="s2">&quot;maximum&quot;</span><span class="p">:</span> <span class="mf">1.0</span><span class="p">,</span>
<span class="p">}</span>
<span class="n">wet_wall</span><span class="o">.</span><span class="n">surfaces</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;wall_tank&quot;</span><span class="p">]</span>


<span class="n">solver_session</span><span class="o">.</span><span class="n">settings</span><span class="o">.</span><span class="n">results</span><span class="o">.</span><span class="n">surfaces</span><span class="o">.</span><span class="n">iso_clip</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;dry_wall&quot;</span><span class="p">)</span>
<span class="n">dry_wall</span> <span class="o">=</span> <span class="n">IsoClip</span><span class="p">(</span><span class="n">solver_session</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;dry_wall&quot;</span><span class="p">)</span>
<span class="n">dry_wall</span><span class="o">.</span><span class="n">field</span> <span class="o">=</span> <span class="s2">&quot;water-vof&quot;</span>
<span class="n">dry_wall</span><span class="o">.</span><span class="n">range</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;minimum&quot;</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
    <span class="s2">&quot;maximum&quot;</span><span class="p">:</span> <span class="mf">0.499</span><span class="p">,</span>
<span class="p">}</span>
<span class="n">dry_wall</span><span class="o">.</span><span class="n">surfaces</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;wall_tank&quot;</span><span class="p">]</span>

<span class="c1"># Meshes</span>
<span class="n">internal_comp_mesh</span> <span class="o">=</span> <span class="n">Mesh</span><span class="p">(</span><span class="n">solver_session</span><span class="p">,</span> <span class="n">new_instance_name</span><span class="o">=</span><span class="s2">&quot;internals&quot;</span><span class="p">)</span>
<span class="n">internal_comp_mesh</span><span class="o">.</span><span class="n">surfaces_list</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s2">&quot;wall_impeller&quot;</span><span class="p">,</span>
    <span class="s2">&quot;shaft_mrf&quot;</span><span class="p">,</span>
    <span class="s2">&quot;shaft_tank&quot;</span><span class="p">,</span>
<span class="p">]</span>
<span class="n">internal_comp_mesh</span><span class="o">.</span><span class="n">surfaces_list</span><span class="p">()</span>

<span class="c1"># dry wall</span>
<span class="n">dry_wall_comp_mesh</span> <span class="o">=</span> <span class="n">Mesh</span><span class="p">(</span><span class="n">solver_session</span><span class="p">,</span> <span class="n">new_instance_name</span><span class="o">=</span><span class="s2">&quot;drywall&quot;</span><span class="p">)</span>
<span class="n">dry_wall_comp_mesh</span><span class="o">.</span><span class="n">surfaces_list</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;dry_wall&quot;</span><span class="p">]</span>
<span class="n">dry_wall_comp_mesh</span><span class="o">.</span><span class="n">surfaces_list</span><span class="p">()</span>

<span class="c1"># wet wall</span>
<span class="n">wet_wall_comp_mesh</span> <span class="o">=</span> <span class="n">Mesh</span><span class="p">(</span><span class="n">solver_session</span><span class="p">,</span> <span class="n">new_instance_name</span><span class="o">=</span><span class="s2">&quot;wetwall&quot;</span><span class="p">)</span>
<span class="n">wet_wall_comp_mesh</span><span class="o">.</span><span class="n">surfaces_list</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;wet_wall&quot;</span><span class="p">]</span>
<span class="n">wet_wall_comp_mesh</span><span class="o">.</span><span class="n">surfaces_list</span><span class="p">()</span>
<span class="n">wet_wall_comp_mesh</span><span class="o">.</span><span class="n">coloring</span><span class="o">.</span><span class="n">option</span> <span class="o">=</span> <span class="s2">&quot;manual&quot;</span>
<span class="n">wet_wall_comp_mesh</span><span class="o">.</span><span class="n">coloring</span><span class="o">.</span><span class="n">manual</span><span class="o">.</span><span class="n">faces</span> <span class="o">=</span> <span class="s2">&quot;pastel cyan&quot;</span>

<span class="c1"># liquid level</span>
<span class="n">liquidlevel_comp_mesh</span> <span class="o">=</span> <span class="n">Mesh</span><span class="p">(</span><span class="n">solver_session</span><span class="p">,</span> <span class="n">new_instance_name</span><span class="o">=</span><span class="s2">&quot;liquidlevel&quot;</span><span class="p">)</span>
<span class="n">liquidlevel_comp_mesh</span><span class="o">.</span><span class="n">surfaces_list</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;freesurface&quot;</span><span class="p">]</span>
<span class="n">liquidlevel_comp_mesh</span><span class="o">.</span><span class="n">surfaces_list</span><span class="p">()</span>
<span class="n">liquidlevel_comp_mesh</span><span class="o">.</span><span class="n">coloring</span><span class="o">.</span><span class="n">option</span> <span class="o">=</span> <span class="s2">&quot;manual&quot;</span>
<span class="n">liquidlevel_comp_mesh</span><span class="o">.</span><span class="n">coloring</span><span class="o">.</span><span class="n">manual</span><span class="o">.</span><span class="n">faces</span> <span class="o">=</span> <span class="s2">&quot;pastel cyan&quot;</span>


<span class="c1"># Scenes</span>
<span class="n">vortex_scene</span> <span class="o">=</span> <span class="n">Scene</span><span class="p">(</span><span class="n">solver_session</span><span class="p">,</span> <span class="n">new_instance_name</span><span class="o">=</span><span class="s2">&quot;scene-1&quot;</span><span class="p">)</span>
<span class="n">vortex_scene</span><span class="o">.</span><span class="n">graphics_objects</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;liquidlevel&quot;</span><span class="p">)</span>
<span class="n">vortex_scene</span><span class="o">.</span><span class="n">graphics_objects</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;drywall&quot;</span><span class="p">)</span>
<span class="n">vortex_scene</span><span class="o">.</span><span class="n">graphics_objects</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;wetwall&quot;</span><span class="p">)</span>
<span class="n">vortex_scene</span><span class="o">.</span><span class="n">graphics_objects</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;internals&quot;</span><span class="p">)</span>

<span class="n">solver_session</span><span class="o">.</span><span class="n">settings</span><span class="o">.</span><span class="n">results</span><span class="o">.</span><span class="n">scene</span><span class="p">[</span><span class="s2">&quot;scene-1&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;graphics_objects&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;liquidlevel&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;transparency&quot;</span><span class="p">:</span> <span class="mi">50</span><span class="p">,</span>
            <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;tank&quot;</span><span class="p">,</span>
            <span class="s2">&quot;colormap_position&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s2">&quot;colormap_left&quot;</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
            <span class="s2">&quot;colormap_bottom&quot;</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
            <span class="s2">&quot;colormap_width&quot;</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
            <span class="s2">&quot;colormap_height&quot;</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
        <span class="p">},</span>
        <span class="s2">&quot;internals&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;transparency&quot;</span><span class="p">:</span> <span class="mi">35</span><span class="p">,</span>
            <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;internals&quot;</span><span class="p">,</span>
            <span class="s2">&quot;colormap_position&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s2">&quot;colormap_left&quot;</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
            <span class="s2">&quot;colormap_bottom&quot;</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
            <span class="s2">&quot;colormap_width&quot;</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
            <span class="s2">&quot;colormap_height&quot;</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
        <span class="p">},</span>
        <span class="s2">&quot;drywall&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;transparency&quot;</span><span class="p">:</span> <span class="mi">75</span><span class="p">,</span>
            <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;fs&quot;</span><span class="p">,</span>
            <span class="s2">&quot;colormap_position&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s2">&quot;colormap_left&quot;</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
            <span class="s2">&quot;colormap_bottom&quot;</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
            <span class="s2">&quot;colormap_width&quot;</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
            <span class="s2">&quot;colormap_height&quot;</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
        <span class="p">},</span>
        <span class="s2">&quot;wetwall&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;transparency&quot;</span><span class="p">:</span> <span class="mi">75</span><span class="p">,</span>
            <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;wetwall&quot;</span><span class="p">,</span>
            <span class="s2">&quot;colormap_position&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s2">&quot;colormap_left&quot;</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
            <span class="s2">&quot;colormap_bottom&quot;</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
            <span class="s2">&quot;colormap_width&quot;</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
            <span class="s2">&quot;colormap_height&quot;</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
        <span class="p">},</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="c1"># Contour plot on Y-Mid plane</span>
<span class="n">solver_session</span><span class="o">.</span><span class="n">settings</span><span class="o">.</span><span class="n">results</span><span class="o">.</span><span class="n">surfaces</span><span class="o">.</span><span class="n">iso_surface</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;ymid&quot;</span><span class="p">)</span>
<span class="n">y_mid_iso_surface</span> <span class="o">=</span> <span class="n">IsoSurface</span><span class="p">(</span><span class="n">solver_session</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;ymid&quot;</span><span class="p">)</span>
<span class="n">y_mid_iso_surface</span><span class="o">.</span><span class="n">field</span> <span class="o">=</span> <span class="s2">&quot;y-coordinate&quot;</span>
<span class="n">y_mid_iso_surface</span><span class="o">.</span><span class="n">iso_values</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">]</span>

<span class="n">volume_fraction_contour</span> <span class="o">=</span> <span class="n">Contour</span><span class="p">(</span><span class="n">solver_session</span><span class="p">,</span> <span class="n">new_instance_name</span><span class="o">=</span><span class="s2">&quot;contour-1&quot;</span><span class="p">)</span>
<span class="n">volume_fraction_contour</span><span class="o">.</span><span class="n">surfaces_list</span> <span class="o">=</span> <span class="n">y_mid_iso_surface</span><span class="o">.</span><span class="n">name</span><span class="p">()</span>
<span class="n">volume_fraction_contour</span><span class="o">.</span><span class="n">field</span> <span class="o">=</span> <span class="s2">&quot;water-vof&quot;</span>
<span class="n">volume_fraction_contour</span><span class="o">.</span><span class="n">surfaces_list</span><span class="p">()</span>
<span class="n">volume_fraction_contour</span><span class="o">.</span><span class="n">display</span><span class="p">()</span>

<span class="n">graphics</span><span class="o">.</span><span class="n">views</span><span class="o">.</span><span class="n">restore_view</span><span class="p">(</span><span class="n">view_name</span><span class="o">=</span><span class="s2">&quot;top&quot;</span><span class="p">)</span>
<span class="n">graphics</span><span class="o">.</span><span class="n">views</span><span class="o">.</span><span class="n">auto_scale</span><span class="p">()</span>
<span class="n">graphics</span><span class="o">.</span><span class="n">picture</span><span class="o">.</span><span class="n">color_mode</span> <span class="o">=</span> <span class="s2">&quot;color&quot;</span>
<span class="n">graphics</span><span class="o">.</span><span class="n">picture</span><span class="o">.</span><span class="n">use_window_resolution</span> <span class="o">=</span> <span class="kc">False</span>
<span class="n">graphics</span><span class="o">.</span><span class="n">picture</span><span class="o">.</span><span class="n">x_resolution</span> <span class="o">=</span> <span class="mi">600</span>
<span class="n">graphics</span><span class="o">.</span><span class="n">picture</span><span class="o">.</span><span class="n">y_resolution</span> <span class="o">=</span> <span class="mi">600</span>
<span class="n">graphics</span><span class="o">.</span><span class="n">picture</span><span class="o">.</span><span class="n">save_picture</span><span class="p">(</span><span class="n">file_name</span><span class="o">=</span><span class="s2">&quot;contour.png&quot;</span><span class="p">)</span>
</pre></div>
</div>
<figure class="align-center" id="id4">
<a class="reference internal image-reference" href="../../_images/contour.png"><img alt="../../_images/contour.png" src="../../_images/contour.png" style="width: 500pt;" />
</a>
<figcaption>
<p><span class="caption-text">Velocity Vectors</span><a class="headerlink" href="#id4" title="Link to this image">#</a></p>
</figcaption>
</figure>
<dl class="simple">
<dt><a href="#id1"><span class="problematic" id="id2">*</span></a>The velocity vectors illustrate the flow patterns within the tank, highlighting the</dt><dd><p>complex interactions between the liquid and gas phases.*</p>
</dd>
</dl>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Animation Setup</span>
<span class="n">solver_session</span><span class="o">.</span><span class="n">settings</span><span class="o">.</span><span class="n">solution</span><span class="o">.</span><span class="n">calculation_activity</span><span class="o">.</span><span class="n">solution_animations</span><span class="o">.</span><span class="n">create</span><span class="p">(</span>
    <span class="s2">&quot;animation-2&quot;</span>
<span class="p">)</span>
<span class="n">solver_session</span><span class="o">.</span><span class="n">settings</span><span class="o">.</span><span class="n">solution</span><span class="o">.</span><span class="n">calculation_activity</span><span class="o">.</span><span class="n">solution_animations</span><span class="p">[</span>
    <span class="s2">&quot;animation-2&quot;</span>
<span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;animate_on&quot;</span><span class="p">:</span> <span class="s2">&quot;scene-1&quot;</span><span class="p">,</span>
    <span class="s2">&quot;frequency&quot;</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span>
    <span class="s2">&quot;storage_type&quot;</span><span class="p">:</span> <span class="s2">&quot;png&quot;</span><span class="p">,</span>
    <span class="s2">&quot;view&quot;</span><span class="p">:</span> <span class="s2">&quot;top&quot;</span><span class="p">,</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="save-initial-files-run-calculation">
<h3>Save Initial Files &amp; Run Calculation<a class="headerlink" href="#save-initial-files-run-calculation" title="Link to this heading">#</a></h3>
<p>Save the initial case file and run the calculation for 500 iterations.</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">solver_session</span><span class="o">.</span><span class="n">settings</span><span class="o">.</span><span class="n">file</span><span class="o">.</span><span class="n">write_case_data</span><span class="p">(</span><span class="n">file_name</span><span class="o">=</span><span class="s2">&quot;vortex_init.cas.h5&quot;</span><span class="p">)</span>

<span class="n">run_calculation</span> <span class="o">=</span> <span class="n">RunCalculation</span><span class="p">(</span><span class="n">solver_session</span><span class="p">)</span>
<span class="n">run_calculation</span><span class="o">.</span><span class="n">iter_count</span> <span class="o">=</span> <span class="mi">50</span>  <span class="c1"># Iteration count keep it 50 for demo only purpose</span>
<span class="n">run_calculation</span><span class="o">.</span><span class="n">calculate</span><span class="p">()</span>
</pre></div>
</div>
</section>
<section id="lic-visualization">
<h3>LIC Visualization<a class="headerlink" href="#lic-visualization" title="Link to this heading">#</a></h3>
<p>Set up the LIC (Line Integral Convolution) visualization for the midplane.</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">lic_visualization</span> <span class="o">=</span> <span class="n">LIC</span><span class="p">(</span><span class="n">solver_session</span><span class="p">,</span> <span class="n">new_instance_name</span><span class="o">=</span><span class="s2">&quot;lic-1&quot;</span><span class="p">)</span>
<span class="n">lic_visualization</span><span class="o">.</span><span class="n">surfaces_list</span> <span class="o">=</span> <span class="n">y_mid_plane</span><span class="o">.</span><span class="n">name</span><span class="p">()</span>
<span class="n">lic_visualization</span><span class="o">.</span><span class="n">field</span> <span class="o">=</span> <span class="s2">&quot;velocity-magnitude&quot;</span>
<span class="n">lic_visualization</span><span class="o">.</span><span class="n">lic_image_filter</span> <span class="o">=</span> <span class="s2">&quot;Strong Sharpen&quot;</span>
<span class="n">lic_visualization</span><span class="o">.</span><span class="n">lic_intensity_factor</span> <span class="o">=</span> <span class="mi">10</span>
<span class="n">lic_visualization</span><span class="o">.</span><span class="n">texture_size</span> <span class="o">=</span> <span class="mi">10</span>
<span class="n">lic_visualization</span><span class="o">.</span><span class="n">display</span><span class="p">()</span>

<span class="n">graphics</span><span class="o">.</span><span class="n">views</span><span class="o">.</span><span class="n">restore_view</span><span class="p">(</span><span class="n">view_name</span><span class="o">=</span><span class="s2">&quot;top&quot;</span><span class="p">)</span>
<span class="n">graphics</span><span class="o">.</span><span class="n">views</span><span class="o">.</span><span class="n">auto_scale</span><span class="p">()</span>
<span class="n">graphics</span><span class="o">.</span><span class="n">picture</span><span class="o">.</span><span class="n">use_window_resolution</span> <span class="o">=</span> <span class="kc">False</span>
<span class="n">graphics</span><span class="o">.</span><span class="n">picture</span><span class="o">.</span><span class="n">x_resolution</span> <span class="o">=</span> <span class="mi">600</span>
<span class="n">graphics</span><span class="o">.</span><span class="n">picture</span><span class="o">.</span><span class="n">y_resolution</span> <span class="o">=</span> <span class="mi">600</span>
<span class="n">graphics</span><span class="o">.</span><span class="n">picture</span><span class="o">.</span><span class="n">save_picture</span><span class="p">(</span><span class="n">file_name</span><span class="o">=</span><span class="s2">&quot;lic-1.png&quot;</span><span class="p">)</span>
</pre></div>
</div>
<figure class="align-center" id="id5">
<a class="reference internal image-reference" href="../../_images/lic-1.png"><img alt="../../_images/lic-1.png" src="../../_images/lic-1.png" style="width: 500pt;" />
</a>
<figcaption>
<p><span class="caption-text">LIC Visualization</span><a class="headerlink" href="#id5" title="Link to this image">#</a></p>
</figcaption>
</figure>
<p><em>The LIC visualization provides a detailed view of the flow patterns within the tank.</em></p>
</section>
<section id="save-visualization-of-final-vortex-shape-write-simulation-files">
<h3>Save Visualization of Final Vortex Shape &amp; Write Simulation Files<a class="headerlink" href="#save-visualization-of-final-vortex-shape-write-simulation-files" title="Link to this heading">#</a></h3>
<p>Save the final vortex shape visualization and write the final case and data files.</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">vortex_scene</span><span class="o">.</span><span class="n">display</span><span class="p">()</span>
<span class="n">graphics</span><span class="o">.</span><span class="n">views</span><span class="o">.</span><span class="n">restore_view</span><span class="p">(</span><span class="n">view_name</span><span class="o">=</span><span class="s2">&quot;top&quot;</span><span class="p">)</span>
<span class="n">graphics</span><span class="o">.</span><span class="n">views</span><span class="o">.</span><span class="n">auto_scale</span><span class="p">()</span>

<span class="n">graphics</span><span class="o">.</span><span class="n">picture</span><span class="o">.</span><span class="n">use_window_resolution</span> <span class="o">=</span> <span class="kc">False</span>
<span class="n">graphics</span><span class="o">.</span><span class="n">picture</span><span class="o">.</span><span class="n">x_resolution</span> <span class="o">=</span> <span class="mi">600</span>
<span class="n">graphics</span><span class="o">.</span><span class="n">picture</span><span class="o">.</span><span class="n">y_resolution</span> <span class="o">=</span> <span class="mi">600</span>
<span class="n">graphics</span><span class="o">.</span><span class="n">picture</span><span class="o">.</span><span class="n">save_picture</span><span class="p">(</span><span class="n">file_name</span><span class="o">=</span><span class="s2">&quot;vortex.png&quot;</span><span class="p">)</span>
</pre></div>
</div>
<figure class="align-center" id="id6">
<a class="reference internal image-reference" href="../../_images/vortex.png"><img alt="../../_images/vortex.png" src="../../_images/vortex.png" style="width: 500pt;" />
</a>
<figcaption>
<p><span class="caption-text">Vortex Shape Visualization</span><a class="headerlink" href="#id6" title="Link to this image">#</a></p>
</figcaption>
</figure>
<p><em>Steady vortex shape in the stirred tank.</em></p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Save final case and data files</span>
<span class="n">solver_session</span><span class="o">.</span><span class="n">settings</span><span class="o">.</span><span class="n">file</span><span class="o">.</span><span class="n">write_case_data</span><span class="p">(</span><span class="n">file_name</span><span class="o">=</span><span class="s2">&quot;vortex_final.cas.h5&quot;</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="close-fluent">
<h3>Close Fluent<a class="headerlink" href="#close-fluent" title="Link to this heading">#</a></h3>
<p>Exit the Fluent session.</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">solver_session</span><span class="o">.</span><span class="n">exit</span><span class="p">()</span>
</pre></div>
</div>
</section>
<section id="generate-gif-animation-vortex-formation">
<h3>Generate GIF Animation: Vortex Formation<a class="headerlink" href="#generate-gif-animation-vortex-formation" title="Link to this heading">#</a></h3>
<p>Create a GIF animation from the saved PNG images of the vortex formation using third-party library <cite>imageio</cite>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Install imageio package if not already installed. You can install it via pip:
<cite>pip install imageio</cite></p>
</div>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">png_dir</span> <span class="o">=</span> <a href="https://docs.python.org/3/library/os.html#os.getcwd" title="os.getcwd" class="sphx-glr-backref-module-os sphx-glr-backref-type-py-function"><span class="n">os</span><span class="o">.</span><span class="n">getcwd</span></a><span class="p">()</span>
<span class="n">images</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">file_name</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><a href="https://docs.python.org/3/library/os.html#os.listdir" title="os.listdir" class="sphx-glr-backref-module-os sphx-glr-backref-type-py-function"><span class="n">os</span><span class="o">.</span><span class="n">listdir</span></a><span class="p">(</span><span class="n">png_dir</span><span class="p">)):</span>
    <span class="k">if</span> <span class="n">file_name</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;animation&quot;</span><span class="p">)</span> <span class="ow">and</span> <span class="n">file_name</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;.png&quot;</span><span class="p">):</span>
        <span class="n">file_path</span> <span class="o">=</span> <a href="https://docs.python.org/3/library/os.path.html#os.path.join" title="os.path.join" class="sphx-glr-backref-module-os-path sphx-glr-backref-type-py-function"><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span></a><span class="p">(</span><span class="n">png_dir</span><span class="p">,</span> <span class="n">file_name</span><span class="p">)</span>
        <span class="n">images</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">imageio</span><span class="o">.</span><span class="n">imread</span><span class="p">(</span><span class="n">file_path</span><span class="p">))</span>

<span class="n">imageio</span><span class="o">.</span><span class="n">mimsave</span><span class="p">(</span><span class="n">uri</span><span class="o">=</span><span class="s2">&quot;vortex.gif&quot;</span><span class="p">,</span> <span class="n">ims</span><span class="o">=</span><span class="n">images</span><span class="p">,</span> <span class="n">duration</span><span class="o">=</span><span class="mf">0.2</span><span class="p">)</span>
</pre></div>
</div>
<figure class="align-center" id="id7">
<a class="reference internal image-reference" href="../../_images/vortex.gif"><img alt="../../_images/vortex.gif" src="../../_images/vortex.gif" style="width: 500pt;" />
</a>
<figcaption>
<p><span class="caption-text">Vortex Formation</span><a class="headerlink" href="#id7" title="Link to this image">#</a></p>
</figcaption>
</figure>
<p><em>The GIF animation illustrates the dynamic process of vortex formation within the stirred tank.</em></p>
<div class="sphx-glr-footer sphx-glr-footer-example docutils container" id="sphx-glr-download-examples-00-fluent-steady-vortex-py">
<div class="sphx-glr-download sphx-glr-download-jupyter docutils container">
<p><a class="reference download internal" download="" href="../../_downloads/654fcd7889bc7d5ce1c6df7dea9154c0/steady_vortex.ipynb"><code class="xref download docutils literal notranslate"><span class="pre">Download</span> <span class="pre">Jupyter</span> <span class="pre">notebook:</span> <span class="pre">steady_vortex.ipynb</span></code></a></p>
</div>
<div class="sphx-glr-download sphx-glr-download-python docutils container">
<p><a class="reference download internal" download="" href="../../_downloads/37a6ef1a75978e4a4c62ac9ce8021610/steady_vortex.py"><code class="xref download docutils literal notranslate"><span class="pre">Download</span> <span class="pre">Python</span> <span class="pre">source</span> <span class="pre">code:</span> <span class="pre">steady_vortex.py</span></code></a></p>
</div>
<div class="sphx-glr-download sphx-glr-download-zip docutils container">
<p><a class="reference download internal" download="" href="../../_downloads/17e386ead380cdfb0f1d2df8d1626692/steady_vortex.zip"><code class="xref download docutils literal notranslate"><span class="pre">Download</span> <span class="pre">zipped:</span> <span class="pre">steady_vortex.zip</span></code></a></p>
</div>
</div>
<p class="sphx-glr-signature"><a class="reference external" href="https://sphinx-gallery.github.io">Gallery generated by Sphinx-Gallery</a></p>
</section>
</section>
</section>


                </article>
              
              
              
              
              
            </div>
            
            
              
                <dialog id="pst-secondary-sidebar-modal"></dialog>
                <div id="pst-secondary-sidebar" class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
<div
    id="pst-page-navigation-heading-2"
    class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> On this page
  </div>
  <nav class="bd-toc-nav page-toc" aria-labelledby="pst-page-navigation-heading-2">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#introduction">Introduction</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#problem-description">Problem Description</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#simulation-setup-solution">Simulation Setup &amp; Solution</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#import-required-modules-and-classes">Import required modules and classes</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#launch-fluent">Launch Fluent</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#mesh">Mesh</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#define-constants">Define Constants</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#read-mesh">Read Mesh</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#define-general-settings">Define General Settings</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#copy-materials-from-fluent-database">Copy Materials from Fluent Database</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#define-named-expression-for-agitation-speed">Define Named Expression for Agitation Speed</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#mrf-zone-parameters">MRF zone parameters</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#rotating-wall-bc-parameters">Rotating Wall BC parameters</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#physical-models-vof">Physical Models: VOF</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#define-initial-conditions">Define Initial Conditions</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#postprocessing-setup">Postprocessing Setup</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#save-initial-files-run-calculation">Save Initial Files &amp; Run Calculation</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#lic-visualization">LIC Visualization</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#save-visualization-of-final-vortex-shape-write-simulation-files">Save Visualization of Final Vortex Shape &amp; Write Simulation Files</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#close-fluent">Close Fluent</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#generate-gif-animation-vortex-formation">Generate GIF Animation: Vortex Formation</a></li>
</ul>
</li>
</ul>
  </nav></div>

  <div class="sidebar-secondary-item">
<!-- If there is no fix edit button function, use the PyData edit-this-button-->
</div>

  <div class="sidebar-secondary-item">
  <div role="note" aria-label="source link">
    <ul class="this-page-menu">
      <li><a href="../../_sources/examples/00-fluent/steady_vortex.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
          </footer>
        
      </main>
    </div>
  </div>
  
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script defer src="../../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf"></script>
<script defer src="../../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf"></script>


  <!-- Include desired assets -->
  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.7/require.min.js"></script>

<script>
// Passing the search options to the search.js file
const SEARCH_OPTIONS = JSON.parse('{"keys": ["title", "text", "objectID"], "limit": 10, "threshold": 0.2}');
const SEARCH_FILE = "../../_static/search.json";
const ADVANCE_SEARCH_PATH = "../../search.html";
const EXTRA_SOURCES = JSON.parse('""');
</script>


<script src="../../_static/js/search.js"></script>

  
  <footer class="bd-footer">
<div class="bd-footer__inner bd-page-width">
  
    <div class="footer-items__start">
      
        <div class="footer-item">

  <p class="copyright">
    
      © Copyright (c) 2025 ANSYS, Inc. All rights reserved.
      <br/>
    
  </p>
</div>
      
        <div class="footer-item">

  <p class="sphinx-version">
    Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 8.1.3.
    <br/>
  </p>
</div>
      
    </div>
  
  
  
    <div class="footer-items__end">
      
        <div class="footer-item"><p class="theme-version">
  Built with the
  <a href="https://sphinxdocs.ansys.com/version/stable/index.html"
    >Ansys Sphinx Theme</a
  >
  1.6.3. <br />Last updated on
  <span id="ast_build_date"></span>
</p>
<script>
  var options = { day: "numeric", month: "long", year: "numeric" };
  var ast_lastModifiedDate = new Date(document.lastModified);
  var ast_build_date = ast_lastModifiedDate.toLocaleDateString("en-US", options);
  document.getElementById("ast_build_date").innerHTML = ast_build_date;
</script></div>
      
    </div>
  
</div>

  </footer>
  </body>
</html>